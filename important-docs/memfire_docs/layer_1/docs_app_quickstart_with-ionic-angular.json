{
  "url": "https://docs.memfiredb.com/docs/app/quickstart/with-ionic-angular/",
  "title": "快速入门: Ionic Angular | MemFire Cloud在线文档",
  "depth": 1,
  "timestamp": "2025-08-12 17:36:04",
  "html": "<main class=\"page-content bg-transparent\">\n<div class=\"top-header d-print-none\" id=\"top-header\">\n<div class=\"header-bar d-flex justify-content-between\">\n<div class=\"d-flex align-items-center\">\n<a alt=\"HomePage\" aria-label=\"HomePage\" class=\"logo-icon me-3\" href=\"/\">\n<div class=\"small\">\n<!--?xml version=\"1.0\" encoding=\"UTF-8\"?-->\n<svg height=\"112px\" version=\"1.1\" viewbox=\"0 0 99 112\" width=\"99px\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<title>MemFireDB备份 6</title>\n<defs>\n<lineargradient id=\"linearGradient-1\" x1=\"49.9999885%\" x2=\"49.9999885%\" y1=\"98.082503%\" y2=\"0.766550128%\">\n<stop offset=\"0%\" stop-color=\"#ED1C23\"></stop>\n<stop offset=\"100%\" stop-color=\"#FBAF3B\"></stop>\n</lineargradient>\n</defs>\n<g fill=\"none\" fill-rule=\"evenodd\" id=\"定稿\" stroke=\"none\" stroke-width=\"1\">\n<g id=\"MemFireDB备份-6\">\n<polygon fill=\"#F9AE7C\" id=\"Fill-1\" points=\"25.9728553 40.7912363 47.4268317 0.00591833831 1.15453123 26.7215251\"></polygon>\n<polygon fill=\"#F9AE7C\" id=\"Fill-3\" points=\"97.4213117 26.7267606 51.1285247 0.000910513587 72.4242993 40.8351686\"></polygon>\n<polygon fill=\"#F9904A\" id=\"Fill-5\" points=\"24.8347133 42.7618153 0.000455256793 28.682999 0.000455256793 82.1608764\"></polygon>\n<polygon fill=\"url(#linearGradient-1)\" id=\"Fill-7\" points=\"27.6634514 42.4662399 49.279044 109.05096 70.7296059 42.507213 49.2779058 1.3747617\"></polygon>\n<polygon fill=\"#F9904A\" id=\"Fill-9\" points=\"98.5660549 28.6951771 73.5622137 42.8047233 98.5660549 82.1719163\"></polygon>\n<polygon fill=\"#FB6D33\" id=\"Fill-13\" points=\"72.2987623 45.061545 50.7514582 111.900071 97.579172 84.8646465\"></polygon>\n<polygon fill=\"#FB6D33\" id=\"Fill-15\" points=\"26.1006687 45.0226206 0.987565799 84.8644188 47.8095888 111.898705\"></polygon>\n<path d=\"M60.0737516,38.507213 C59.3168872,35.669825 57.0462939,33.3514298 57.0462939,33.3514298 C57.0462939,33.3514298 57.0804382,35.8849338 56.2894295,37.513615 C55.4847631,39.1696116 53.8765685,40.3054773 53.8765685,40.3054773 C53.8765685,40.3054773 56.1016361,33.8840802 54.2715038,30.1247973 C52.0259496,25.5073552 49.1771803,23.3357803 49.1771803,23.3357803 C49.1771803,23.3357803 50.1070423,28.1319107 48.6240432,31.5065016 C47.1672215,34.8264618 42.8058614,36.7260208 40.7241997,38.7132167 C39.1865699,40.1791435 38.0814341,43.0711623 37.6068289,44.4847347 C37.5715465,44.5883056 37.560165,44.6918765 37.5533362,44.7943093 C37.584066,43.9816759 37.8890881,39.8024186 40.9654858,37.4293925 C43.8404325,35.2111538 41.2431925,30.3478731 41.2431925,30.3478731 C41.2431925,30.3478731 41.7212121,32.5638355 40.9939394,34.1401622 C40.2655285,35.7153507 38.7187936,36.5962726 38.0154218,38.259098 C37.3883056,39.7409589 37.5203301,44.1432921 37.5453692,44.8409731 C37.5453692,44.8591834 37.5476455,44.8762555 37.5476455,44.8921895 C37.5476455,44.9263338 37.5487836,44.9456822 37.5487836,44.9456822 L37.5487836,44.9115379 C37.5590269,45.2655001 37.7138142,45.6080808 37.9972116,45.8448143 L48.3713757,55.6442168 C48.8380139,56.0323232 49.5163466,56.0334614 49.9841229,55.6476312 L60.5938825,45.7105136 C60.9034571,45.4544316 61.0719021,45.0686015 61.0457249,44.6656992 C60.9546735,43.2282259 60.5699815,40.3692133 60.0737516,38.507213\" fill=\"#FFFFFF\" id=\"Fill-17\"></path>\n</g>\n</g>\n</svg>\n</div>\n<div class=\"big\">\n<svg height=\"20\" width=\"232\" xmlns=\"http://www.w3.org/2000/svg\"><defs><lineargradient id=\"a\" x1=\"50%\" x2=\"50%\" y1=\"98.083%\" y2=\".767%\"><stop offset=\"0%\" stop-color=\"#ED1C23\"></stop><stop offset=\"100%\" stop-color=\"#FBAF3B\"></stop></lineargradient></defs><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M78.622 12.384l1.596 21.94H77.49l-.847-14.154-8.98 15.523-4.899-15.53-4.416 14.162H55.6l7.085-21.871 5.712 17.174 10.224-17.244zm99.46.382l.324.01.454.036c.085.008.175.018.269.03l.61.096c1.09.203 2.518.644 3.883 1.596l.515.383-.46 3.694-.413-.62-.154-.195-.255-.285c-.765-.802-2.485-2.188-5.23-2.188-4.55 0-8.723 3.809-9.3 8.491-.287 2.311.334 4.469 1.755 6.077 1.342 1.517 3.257 2.354 5.39 2.354 2.606 0 4.58-1.225 5.606-2.04l.359-.3.424-.408.507-.552-.466 3.766-.093.06a12.622 12.622 0 01-4.577 1.842l-.629.1-.53.058-.418.027-.444.003c-2.918-.002-5.532-1.142-7.36-3.21-1.851-2.096-2.67-4.88-2.305-7.837.73-5.88 5.964-10.696 11.806-10.974l.732-.014zm18.174 9.018c1.724 0 3.344.713 4.443 1.956 1.101 1.248 1.59 2.88 1.377 4.596-.432 3.504-3.808 6.466-7.375 6.466-1.728 0-3.348-.715-4.45-1.96-1.096-1.242-1.583-2.864-1.377-4.563.44-3.52 3.818-6.495 7.382-6.495zm19.446.535l-1.486 12.02h-2.558l.16-1.292c-.936.93-2.462 1.755-4.173 1.755-1.318 0-2.48-.492-3.267-1.385-.804-.91-1.168-2.184-1.008-3.497l.9-7.274 2.597-.327-.914 7.402c-.101.785.084 1.466.525 1.968.49.552 1.27.845 2.25.845 1.526 0 3.3-1.155 3.51-2.873l.87-7.015 2.594-.327zm-63.587-.547c1.77 0 3.21.58 4.164 1.678 1.047 1.207 1.48 3.01 1.263 5.233l-.097.771h-9.914c.16 1.896 1.567 2.979 3.895 2.979 1.806 0 2.878-.434 3.868-.961l1.119-.623-.312 2.522-.106.06c-1.224.687-2.604 1.356-4.8 1.356-2.092 0-3.873-.708-5.006-1.992-.991-1.12-1.404-2.599-1.198-4.272.548-4.433 4.001-6.751 7.124-6.751zm-62.717 0c1.771 0 3.211.58 4.164 1.678 1.048 1.207 1.48 3.01 1.263 5.233l-.097.771h-9.914c.16 1.896 1.567 2.979 3.895 2.979 1.622 0 2.652-.35 3.563-.803l.594-.315.83-.466-.312 2.522-.105.06c-1.224.687-2.604 1.356-4.8 1.356-2.093 0-3.874-.708-5.007-1.992-.99-1.12-1.404-2.599-1.197-4.272.547-4.433 4-6.751 7.123-6.751zM231.476 12l-2.767 22.34h-2.556l.197-1.59c-1.104 1.191-2.882 2.021-4.471 2.021-1.781 0-3.24-.583-4.217-1.69-1.02-1.151-1.452-2.817-1.222-4.686.485-3.908 3.43-6.636 7.167-6.636 1.565 0 3.065.832 3.852 2.064l1.356-10.968 2.661-.855zm-42.07.002L186.64 34.34h-2.556l2.664-21.483 2.66-.854zm-56.632 1.268l-1.166 2.527h-9.586l-.85 6.867h6.627v.48h-.12l-.883 1.778v.24h-5.933l-1.138 9.163h-2.729l2.612-21.055h13.166zm2.715 9.038l-1.497 12.017h-2.559l1.455-11.722 2.601-.295zm-24.427-.537c1 0 1.93.427 2.616 1.204.84.95 1.224 2.29 1.053 3.677l-.955 7.673h-2.527l.922-7.445c.13-1.017-.027-1.81-.45-2.287-.326-.367-.815-.554-1.458-.554-1.954 0-3.178 1.346-3.332 2.613l-.955 7.673h-2.556l.922-7.445c.127-1.03-.024-1.826-.442-2.297-.319-.362-.801-.544-1.437-.544-1.522 0-3.3 1.166-3.516 2.901l-.912 7.385h-2.559l1.455-11.722 2.594-.295-.146 1.164c1.027-1.077 2.419-1.701 3.854-1.701 1.375 0 2.58.79 3.226 2.083.914-1.13 2.05-2.083 4.603-2.083zm29.487.532l-.206 1.73c1.082-.978 2.932-1.7 4.514-1.7h.269l-.271 2.282h-.214c-1.814 0-4.469.837-4.7 2.7l-.866 7.01h-2.558l1.45-11.693 2.582-.329zm55.47 1.865c-2.31 0-4.27 1.792-4.563 4.168-.144 1.145.15 2.196.824 2.957.64.725 1.586 1.126 2.656 1.126 2.292 0 4.241-1.78 4.532-4.14.146-1.169-.144-2.237-.821-3.003-.634-.715-1.567-1.108-2.628-1.108zm27.497-.029c-2.278 0-4.15 1.752-4.45 4.17-.149 1.187.137 2.255.8 3.006.611.692 1.526 1.076 2.57 1.076 2.294 0 4.173-1.743 4.468-4.143.152-1.21-.13-2.285-.79-3.033-.623-.704-1.52-1.076-2.598-1.076zm-134.356.045c-1.89 0-3.372 1.094-4.015 2.947h7.164a2.853 2.853 0 00-.71-1.956c-.574-.648-1.416-.991-2.439-.991zm62.715 0c-1.892 0-3.37 1.094-4.013 2.947h7.166a2.867 2.867 0 00-.713-1.956c-.573-.648-1.416-.991-2.44-.991zm-17.267-7.614c.919 0 1.706.748 1.754 1.668a1.587 1.587 0 01-1.603 1.692c-.917 0-1.704-.75-1.754-1.668a1.593 1.593 0 011.603-1.692z\" fill=\"#116\"></path><path d=\"M11.131 17.482L20.326.002.495 11.453zm30.621-6.028L21.912 0l9.127 17.5z\" fill=\"#F9AE7C\"></path><path d=\"M10.643 18.326L0 12.293v22.919z\" fill=\"#F9904A\"></path><path d=\"M11.856 18.2l9.264 28.536 9.193-28.519L21.119.59z\" fill=\"url(#a)\"></path><path d=\"M42.243 12.298l-10.716 6.047 10.716 16.872z\" fill=\"#F9904A\"></path><path d=\"M30.985 19.312l-9.234 28.645L41.82 36.371zm-19.799-.017L.423 36.37 20.49 47.957z\" fill=\"#FB6D33\"></path><path d=\"M25.746 16.503c-.324-1.216-1.298-2.21-1.298-2.21s.015 1.086-.324 1.784c-.345.71-1.034 1.197-1.034 1.197s.954-2.752.17-4.363c-.963-1.98-2.184-2.91-2.184-2.91s.398 2.056-.237 3.502c-.624 1.423-2.494 2.237-3.386 3.088-.659.629-1.132 1.868-1.336 2.474a.509.509 0 00-.023.133c.013-.349.144-2.14 1.463-3.157 1.232-.95.119-3.035.119-3.035s.205.95-.107 1.625c-.312.676-.975 1.053-1.277 1.766-.268.635-.212 2.522-.201 2.82v.023l.001.022v-.014a.54.54 0 00.193.4l4.446 4.2c.2.166.49.166.69.001l4.548-4.259a.535.535 0 00.193-.448c-.039-.616-.203-1.84-.416-2.639\" fill=\"#FFF\"></path></g></svg>\n</div>\n</a>\n<button class=\"btn btn-icon btn-soft\" id=\"close-sidebar\">\n<span class=\"material-icons size-20 menu-icon align-middle\">menu</span>\n</button>\n</div>\n<div class=\"d-flex align-items-center\">\n<ul class=\"list-unstyled mb-0\">\n</ul>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://memfiredb.com/\" target=\"_blank\" type=\"button\">官网</a>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://community.memfiredb.com/\" target=\"_blank\" type=\"button\">论坛</a>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://cloud.memfiredb.com/auth/login\" target=\"_blank\" type=\"button\">登录</a>\n<button aria-label=\"Toggle user interface mode\" class=\"btn btn-icon btn-default ms-2\" id=\"mode\" type=\"button\">\n<span class=\"toggle-dark\">\n<svg fill=\"currentColor\" height=\"30\" viewbox=\"0 0 48 48\" width=\"30\" xmlns=\"http://www.w3.org/2000/svg\">\n<title>Enable dark mode</title>\n<path d=\"M24 42q-7.5 0-12.75-5.25T6 24q0-7.5 5.25-12.75T24 6q.4 0 .85.025.45.025 1.15.075-1.8 1.6-2.8 3.95-1 2.35-1 4.95 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6 0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z\"></path>\n</svg>\n</span>\n<span class=\"toggle-light\">\n<svg fill=\"currentColor\" height=\"30\" viewbox=\"0 0 48 48\" width=\"30\" xmlns=\"http://www.w3.org/2000/svg\">\n<title>Enable light mode</title>\n<path d=\"M24 31q2.9 0 4.95-2.05Q31 26.9 31 24q0-2.9-2.05-4.95Q26.9 17 24 17q-2.9 0-4.95 2.05Q17 21.1 17 24q0 2.9 2.05 4.95Q21.1 31 24 31Zm0 3q-4.15 0-7.075-2.925T14 24q0-4.15 2.925-7.075T24 14q4.15 0 7.075 2.925T34 24q0 4.15-2.925 7.075T24 34ZM3.5 25.5q-.65 0-1.075-.425Q2 24.65 2 24q0-.65.425-1.075Q2.85 22.5 3.5 22.5h5q.65 0 1.075.425Q10 23.35 10 24q0 .65-.425 1.075-.425.425-1.075.425Zm36 0q-.65 0-1.075-.425Q38 24.65 38 24q0-.65.425-1.075.425-.425 1.075-.425h5q.65 0 1.075.425Q46 23.35 46 24q0 .65-.425 1.075-.425.425-1.075.425ZM24 10q-.65 0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 10 24 10Zm0 36q-.65 0-1.075-.425-.425-.425-.425-1.075v-5q0-.65.425-1.075Q23.35 38 24 38q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46ZM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05 0 .6-.4 1-.4.45-1.025.45-.625 0-1.075-.4Zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45ZM33.9 14.1q-.45-.45-.45-1.05 0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4-.625 0-1.075-.4ZM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6 0 1.05.45.45.45.45 1.05 0 .6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425ZM24 24Z\"></path>\n</svg>\n</span>\n</button>\n</div>\n</div>\n</div>\n<div class=\"container-fluid\">\n<div class=\"layout-spacing\">\n<div class=\"d-md-flex justify-content-between align-items-center\"></div>\n<div class=\"row flex-xl-nowrap\">\n<div class=\"docs-toc col-xl-3 d-xl-block\"><toc>\n<div class=\"fw-bold text-uppercase mb-2\">本页</div>\n\n</toc></div>\n<div class=\"docs-toc-mobile d-print-none d-xl-none\">\n<button aria-expanded=\"false\" class=\"btn-secondary dropdown-toggle\" data-bs-offset=\"0,0\" data-bs-toggle=\"dropdown\" id=\"toc-dropdown-btn\" type=\"button\">\n                                                Table of Contents\n                                            </button>\n</div>\n<div class=\"docs-content col-12 col-xl-9 mt-0\">\n<div class=\"mb-0 d-flex\">\n<h1 class=\"content-title mb-0\">\n                                                    快速入门: Ionic Angular\n                                                    \n                                                </h1>\n</div>\n<div class=\"main-content\" data-bs-root-margin=\"0px 0px -65%\" data-bs-spy=\"scroll\" data-bs-target=\"#toc-mobile\" id=\"content\">\n<div data-prismjs-copy=\"\" data-prismjs-copy-error=\"\" data-prismjs-copy-success=\"\">\n<img src=\"../../img/ionic-demos/ionic-angular-account.png\"/>\n<h3 id=\"github\">GitHub <a aria-hidden=\"true\" class=\"anchor\" href=\"#github\"><i class=\"material-icons align-middle\">link</i></a></h3><p>如果你在阅读指南时遇到困难，请参考<a href=\"https://github.com/mhartington/supabase-ionic-angular\" rel=\"external\" target=\"_blank\">此版本<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<h2 id=\"构建应用程序\">构建应用程序 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e6%9e%84%e5%bb%ba%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f\"><i class=\"material-icons align-middle\">link</i></a></h2><p>让我们开始从头开始构建Angular应用程序。</p>\n<h3 id=\"初始化一个ionic-angular应用程序\">初始化一个Ionic Angular应用程序 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%88%9d%e5%a7%8b%e5%8c%96%e4%b8%80%e4%b8%aaionic-angular%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f\"><i class=\"material-icons align-middle\">link</i></a></h3><p>我们可以使用<a href=\"https://ionicframework.com/docs/cli\" rel=\"external\" target=\"_blank\">Ionic CLI<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>来初始化\n一个名为<code>supabase-ionic-angular</code>的应用程序。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-bash\" id=\"c83ffd5\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> @ionic/cli\nionic start supabase-ionic-angular blank <span class=\"token parameter variable\">--type</span> angular\n<span class=\"token builtin class-name\">cd</span> supabase-ionic-angular</code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>然后让我们安装唯一的额外依赖：<a href=\"https://github.com/supabase/supabase-js\" rel=\"external\" target=\"_blank\">supabase-js<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-bash\" id=\"1d58f7c\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @supabase/supabase-js</code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>最后我们要在<code>environment.ts</code>文件中保存环境变量。\n我们所需要的是API URL和你[早些时候]复制的<code>anon</code>密钥(#get-theapi-keys)。\n这些变量将暴露在浏览器上，这完全没有问题，因为我们在数据库上启用了<a data-bs-delay='{\"hide\":300,\"show\":550}' data-bs-html=\"true\" data-bs-title=\"&lt;a href='/docs/app/development_guide/auth/auth/'&gt;&lt;p&gt;认证&lt;/p&gt;&lt;strong&gt;概述&lt;/strong&gt;&lt;br&gt;使用Supabase来认证和授权你的用户。&lt;/a&gt;\" data-bs-toggle=\"tooltip\" href=\"/docs/app/development_guide/auth/auth/#row-level-security\">行级安全</a>。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"f1fdb24\" tabindex=\"0\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> environment <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  production<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  supabaseUrl<span class=\"token operator\">:</span> <span class=\"token string\">'YOUR_SUPABASE_URL'</span><span class=\"token punctuation\">,</span>\n  supabaseKey<span class=\"token operator\">:</span> <span class=\"token string\">'YOUR_SUPABASE_KEY'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>现在我们有了API凭证，让我们用<code>ionic g s supabase</code>创建一个<strong>SupabaseService</strong>，以初始化Supabase客户端，并实现与Supabase API通信的功能。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"2f20ae3\" tabindex=\"0\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> LoadingController<span class=\"token punctuation\">,</span> ToastController <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@ionic/angular'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthChangeEvent<span class=\"token punctuation\">,</span> createClient<span class=\"token punctuation\">,</span> Session<span class=\"token punctuation\">,</span> SupabaseClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@supabase/supabase-js'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> environment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../environments/environment'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Profile</span> <span class=\"token punctuation\">{</span>\n  username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  website<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  avatar_url<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  providedIn<span class=\"token operator\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SupabaseService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> supabase<span class=\"token operator\">:</span> SupabaseClient\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> loadingCtrl<span class=\"token operator\">:</span> LoadingController<span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> toastCtrl<span class=\"token operator\">:</span> ToastController<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase <span class=\"token operator\">=</span> <span class=\"token function\">createClient</span><span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">.</span>supabaseUrl<span class=\"token punctuation\">,</span> environment<span class=\"token punctuation\">.</span>supabaseKey<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">get</span> <span class=\"token function\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">get</span> <span class=\"token function\">session</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">session</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">get</span> <span class=\"token function\">profile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase\n      <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'profiles'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">username, website, avatar_url</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token operator\">?.</span>id<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">single</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">authChanges</span><span class=\"token punctuation\">(</span><span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> AuthChangeEvent<span class=\"token punctuation\">,</span> session<span class=\"token operator\">:</span> Session <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">onAuthStateChange</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span>email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">signOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">signOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">updateProfile</span><span class=\"token punctuation\">(</span>profile<span class=\"token operator\">:</span> Profile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> update <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>profile<span class=\"token punctuation\">,</span>\n      id<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token operator\">?.</span>id<span class=\"token punctuation\">,</span>\n      updated_at<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'profiles'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">upsert</span><span class=\"token punctuation\">(</span>update<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      returning<span class=\"token operator\">:</span> <span class=\"token string\">'minimal'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Don't return the value after inserting</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">downLoadImage</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'avatars'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">download</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">uploadAvatar</span><span class=\"token punctuation\">(</span>filePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> file<span class=\"token operator\">:</span> File<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'avatars'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">upload</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">createNotice</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> toast <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toastCtrl<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> message<span class=\"token punctuation\">,</span> duration<span class=\"token operator\">:</span> <span class=\"token number\">5000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">await</span> toast<span class=\"token punctuation\">.</span><span class=\"token function\">present</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">createLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loadingCtrl<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"设置一个登录路由\">设置一个登录路由 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e8%ae%be%e7%bd%ae%e4%b8%80%e4%b8%aa%e7%99%bb%e5%bd%95%e8%b7%af%e7%94%b1\"><i class=\"material-icons align-middle\">link</i></a></h3><p>让我们建立一个路由来管理登录和注册。我们将使用Magic Links，所以用户可以用他们的电子邮件登录，而不需要使用密码。\n用<code>ionic g page login</code> Ionic CLI命令创建一个<strong>LoginPage</strong>。</p>\n<blockquote>\n<p>本指南将显示模板的内联，但示例应用程序将有templateUrls</p>\n</blockquote>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"222f7e3\" tabindex=\"0\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SupabaseService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../supabase.service'</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'app-login'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;ion-header&gt;\n      &lt;ion-toolbar&gt;\n        &lt;ion-title&gt;Login&lt;/ion-title&gt;\n      &lt;/ion-toolbar&gt;\n    &lt;/ion-header&gt;\n\n    &lt;ion-content&gt;\n      &lt;div class=\"ion-padding\"&gt;\n        &lt;h1&gt;Supabase + Ionic Angular&lt;/h1&gt;\n        &lt;p&gt;Sign in via magic link with your email below&lt;/p&gt;\n      &lt;/div&gt;\n      &lt;ion-list inset=\"true\"&gt;\n        &lt;form (ngSubmit)=\"handleLogin($event)\"&gt;\n          &lt;ion-item&gt;\n            &lt;ion-label position=\"stacked\"&gt;Email&lt;/ion-label&gt;\n            &lt;ion-input [(ngModel)]=\"email\" name=\"email\" autocomplete type=\"email\"&gt;&lt;/ion-input&gt;\n          &lt;/ion-item&gt;\n          &lt;div class=\"ion-text-center\"&gt;\n            &lt;ion-button type=\"submit\" fill=\"clear\"&gt;Login&lt;/ion-button&gt;\n          &lt;/div&gt;\n        &lt;/form&gt;\n      &lt;/ion-list&gt;\n    &lt;/ion-content&gt;\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./login.page.scss'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LoginPage</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n  email <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> supabase<span class=\"token operator\">:</span> SupabaseService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">handleLogin</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> loader <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">createLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">await</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">present</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">await</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">createNotice</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Check your email for the login link!'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">createNotice</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>error_description <span class=\"token operator\">||</span> error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"账号页面\">账号页面 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e8%b4%a6%e5%8f%b7%e9%a1%b5%e9%9d%a2\"><i class=\"material-icons align-middle\">link</i></a></h3><p>在用户登录后，我们可以让他们编辑他们的个人资料细节和管理他们的账户。\n用<code>ionic g page account</code> Ionic CLI命令创建一个<strong>AccountComponent</strong>。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"8f55abb\" tabindex=\"0\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Profile<span class=\"token punctuation\">,</span> SupabaseService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../supabase.service'</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'app-account'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;ion-header&gt;\n      &lt;ion-toolbar&gt;\n        &lt;ion-title&gt;Account&lt;/ion-title&gt;\n      &lt;/ion-toolbar&gt;\n    &lt;/ion-header&gt;\n\n    &lt;ion-content&gt;\n      &lt;form&gt;\n        &lt;ion-item&gt;\n          &lt;ion-label position=\"stacked\"&gt;Email&lt;/ion-label&gt;\n          &lt;ion-input type=\"email\" [value]=\"session?.user?.email\"&gt;&lt;/ion-input&gt;\n        &lt;/ion-item&gt;\n\n        &lt;ion-item&gt;\n          &lt;ion-label position=\"stacked\"&gt;Name&lt;/ion-label&gt;\n          &lt;ion-input type=\"text\" name=\"username\" [(ngModel)]=\"profile.username\"&gt;&lt;/ion-input&gt;\n        &lt;/ion-item&gt;\n\n        &lt;ion-item&gt;\n          &lt;ion-label position=\"stacked\"&gt;Website&lt;/ion-label&gt;\n          &lt;ion-input type=\"url\" name=\"website\" [(ngModel)]=\"profile.website\"&gt;&lt;/ion-input&gt;\n        &lt;/ion-item&gt;\n        &lt;div class=\"ion-text-center\"&gt;\n          &lt;ion-button fill=\"clear\" (click)=\"updateProfile()\"&gt;Update Profile&lt;/ion-button&gt;\n        &lt;/div&gt;\n      &lt;/form&gt;\n\n      &lt;div class=\"ion-text-center\"&gt;\n        &lt;ion-button fill=\"clear\" (click)=\"signOut()\"&gt;Log Out&lt;/ion-button&gt;\n      &lt;/div&gt;\n    &lt;/ion-content&gt;\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./account.page.scss'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AccountPage</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n  profile<span class=\"token operator\">:</span> Profile <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    username<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    avatar_url<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    website<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  session <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>session\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> supabase<span class=\"token operator\">:</span> SupabaseService<span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> router<span class=\"token operator\">:</span> Router<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getProfile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getProfile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> profile<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> status <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span>profile\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error <span class=\"token operator\">&amp;&amp;</span> status <span class=\"token operator\">!==</span> <span class=\"token number\">406</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> error\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>profile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>profile <span class=\"token operator\">=</span> profile\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">updateProfile</span><span class=\"token punctuation\">(</span>avatar_url<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> loader <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">createLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">await</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">present</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">updateProfile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>profile<span class=\"token punctuation\">,</span> avatar_url <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">await</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">createNotice</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Profile updated!'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">createNotice</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">signOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'testing?'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">signOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> replaceUrl<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"启动\">启动 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%90%af%e5%8a%a8\"><i class=\"material-icons align-middle\">link</i></a></h3><p>现在我们已经有了所有的组件，让我们来更新<strong>AppComponent</strong>。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"a39da9f\" tabindex=\"0\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SupabaseService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./supabase.service'</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'app-root'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;ion-app&gt;\n      &lt;ion-router-outlet&gt;&lt;/ion-router-outlet&gt;\n    &lt;/ion-app&gt;\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'app.component.scss'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> supabase<span class=\"token operator\">:</span> SupabaseService<span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> router<span class=\"token operator\">:</span> Router<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">authChanges</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">,</span> session<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>session<span class=\"token operator\">?.</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'/account'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>然后更新<strong>AppRoutingModule</strong></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"e690c65\" tabindex=\"0\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NgModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PreloadAllModules<span class=\"token punctuation\">,</span> RouterModule<span class=\"token punctuation\">,</span> Routes <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span>\n\n<span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">loadChildren</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./login/login.module'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> m<span class=\"token punctuation\">.</span>LoginPageModule<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> <span class=\"token string\">'account'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">loadChildren</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./account/account.module'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> m<span class=\"token punctuation\">.</span>AccountPageModule<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">NgModule</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  imports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    RouterModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span>routes<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      preloadingStrategy<span class=\"token operator\">:</span> PreloadAllModules<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  exports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>RouterModule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppRoutingModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>一旦完成，在终端窗口运行这个程序。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-bash\" id=\"346c4a8\" tabindex=\"0\"><code class=\"language-bash\">ionic serve</code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>浏览器将自动打开，显示该应用程序。</p>\n<img src=\"../../img/ionic-demos/ionic-angular.png\"/>\n<h2 id=\"个人资料照片\">个人资料照片 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e4%b8%aa%e4%ba%ba%e8%b5%84%e6%96%99%e7%85%a7%e7%89%87\"><i class=\"material-icons align-middle\">link</i></a></h2><p>每个Supabase项目都配置了<a data-bs-delay='{\"hide\":300,\"show\":550}' data-bs-html=\"true\" data-bs-title=\"&lt;a href='/docs/app/development_guide/storage/storage/'&gt;&lt;p&gt;对象存储&lt;/p&gt;&lt;strong&gt;概述&lt;/strong&gt;&lt;br&gt;Use Supabase to store and serve files.&lt;/a&gt;\" data-bs-toggle=\"tooltip\" href=\"/docs/app/development_guide/storage/storage/\">存储</a>，用于管理照片和视频等大文件。</p>\n<h3 id=\"创建一个上传小部件\">创建一个上传小部件 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e4%b8%8a%e4%bc%a0%e5%b0%8f%e9%83%a8%e4%bb%b6\"><i class=\"material-icons align-middle\">link</i></a></h3><p>让我们为用户创建一个头像，以便他们可以上传个人资料照片。</p>\n<p>首先安装两个包，以便与用户的相机互动。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-bash\" id=\"3a9249c\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @ionic/pwa-elements @capacitor/camera</code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p><a href=\"https://capacitorjs.com\" rel=\"external\" target=\"_blank\">CapacitorJS<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>是Ionic的一个跨平台原生运行时间，它使网络应用通过应用商店部署，并提供对原生deavice API的访问。</p>\n<p>Ionic PWA元素是一个配套的软件包，它将对某些不提供用户界面的浏览器API进行聚填，并提供自定义的Ionic UI。</p>\n<p>安装了这些包后，我们可以更新我们的<code>main.ts</code>，以包括对Ionic PWA元素的额外引导调用。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"f060b55\" tabindex=\"0\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> enableProdMode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> platformBrowserDynamic <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/platform-browser-dynamic'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AppModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./app/app.module'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> environment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./environments/environment'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> defineCustomElements <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@ionic/pwa-elements/loader'</span>\n<span class=\"token function\">defineCustomElements</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">.</span>production<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">enableProdMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">platformBrowserDynamic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">bootstrapModule</span><span class=\"token punctuation\">(</span>AppModule<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>然后用这个Ionic CLI命令创建一个<strong>AvatarComponent</strong>。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-bash\" id=\"0e0b6b0\" tabindex=\"0\"><code class=\"language-bash\">ionic g component avatar <span class=\"token parameter variable\">--module</span><span class=\"token operator\">=</span>/src/app/account/account.module.ts --create-module</code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"f7cd109\" tabindex=\"0\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> EventEmitter<span class=\"token punctuation\">,</span> Input<span class=\"token punctuation\">,</span> OnInit<span class=\"token punctuation\">,</span> Output <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> DomSanitizer<span class=\"token punctuation\">,</span> SafeResourceUrl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/platform-browser'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SupabaseService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../supabase.service'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Camera<span class=\"token punctuation\">,</span> CameraResultType <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@capacitor/camera'</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'app-avatar'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div class=\"avatar_wrapper\" (click)=\"uploadAvatar()\"&gt;\n      &lt;img *ngIf=\"_avatarUrl; else noAvatar\" [src]=\"_avatarUrl\" /&gt;\n      &lt;ng-template #noAvatar&gt;\n        &lt;ion-icon name=\"person\" class=\"no-avatar\"&gt;&lt;/ion-icon&gt;\n      &lt;/ng-template&gt;\n    &lt;/div&gt;\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  style<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    :host {\n       display: block;\n       margin: auto;\n       min-height: 150px;\n    }\n     :host .avatar_wrapper {\n       margin: 16px auto 16px;\n       border-radius: 50%;\n       overflow: hidden;\n       height: 150px;\n       aspect-ratio: 1;\n       background: var(--ion-color-step-50);\n       border: thick solid var(--ion-color-step-200);\n    }\n     :host .avatar_wrapper:hover {\n       cursor: pointer;\n    }\n     :host .avatar_wrapper ion-icon.no-avatar {\n       width: 100%;\n       height: 115%;\n    }\n     :host img {\n       display: block;\n       object-fit: cover;\n       width: 100%;\n       height: 100%;\n    }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AvatarComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n  _avatarUrl<span class=\"token operator\">:</span> SafeResourceUrl <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span>\n  uploading <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Input</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">avatarUrl</span><span class=\"token punctuation\">(</span>url<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">downloadImage</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Output</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> upload <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> supabase<span class=\"token operator\">:</span> SupabaseService<span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> dom<span class=\"token operator\">:</span> DomSanitizer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">downloadImage</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">downLoadImage</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_avatarUrl <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dom<span class=\"token punctuation\">.</span><span class=\"token function\">bypassSecurityTrustResourceUrl</span><span class=\"token punctuation\">(</span><span class=\"token constant\">URL</span><span class=\"token punctuation\">.</span><span class=\"token function\">createObjectURL</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error downloading image: '</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">uploadAvatar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> loader <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">createLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> photo <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Camera<span class=\"token punctuation\">.</span><span class=\"token function\">getPhoto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        resultType<span class=\"token operator\">:</span> CameraResultType<span class=\"token punctuation\">.</span>DataUrl<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">const</span> file <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>photo<span class=\"token punctuation\">.</span>dataUrl<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">blob</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>blob<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>blob<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'my-file'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">image/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>photo<span class=\"token punctuation\">.</span>format<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">const</span> fileName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>photo<span class=\"token punctuation\">.</span>format<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n\n      <span class=\"token keyword\">await</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">present</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">uploadAvatar</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>upload<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>supabase<span class=\"token punctuation\">.</span><span class=\"token function\">createNotice</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n      loader<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"添加新的小组件\">添加新的小组件 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e6%b7%bb%e5%8a%a0%e6%96%b0%e7%9a%84%e5%b0%8f%e7%bb%84%e4%bb%b6\"><i class=\"material-icons align-middle\">link</i></a></h3><p>然后我们可以在<strong>账户组件</strong>的html模板上面添加小部件。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ts\" id=\"9e28808\" tabindex=\"0\"><code class=\"language-ts\">template<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n&lt;ion-header&gt;\n  &lt;ion-toolbar&gt;\n    &lt;ion-title&gt;Account&lt;/ion-title&gt;\n  &lt;/ion-toolbar&gt;\n&lt;/ion-header&gt;\n\n&lt;ion-content&gt;\n  &lt;app-avatar\n    [avatarUrl]=\"this.profile?.avatar_url\"\n    (upload)=\"updateProfile($event)\"\n  &gt;&lt;/app-avatar&gt;\n\n&lt;!-- input fields --&gt;\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h2 id=\"下一步\">下一步 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e4%b8%8b%e4%b8%80%e6%ad%a5\"><i class=\"material-icons align-middle\">link</i></a></h2><p>在这个阶段，你已经有了一个功能完备的应用程序!</p>\n<ul>\n<li>有问题吗？<a href=\"https://community.memfiredb.com/\" rel=\"external\" target=\"_blank\">在此提问<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>.</li>\n<li>请登录<a href=\"https://cloud.memfiredb.com/\" rel=\"external\" target=\"_blank\">MemFire Cloud<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></li>\n</ul>\n<h2 id=\"资源\">资源 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e8%b5%84%e6%ba%90\"><i class=\"material-icons align-middle\">link</i></a></h2><ul>\n<li><a href=\"https://supabase.com/blog/authentication-in-ionic-angular\" rel=\"external\" target=\"_blank\">在Ionic Angular中使用Supabase进行认证<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></li>\n</ul>\n</div>\n</div>\n<div><hr class=\"doc-hr\"/>\n<div class=\"d-print-none\" id=\"doc-nav\">\n<div class=\"row flex-xl-nowrap\">\n<div class=\"col-sm-6 pt-2 doc-next\">\n<a href=\"/docs/app/quickstart/with-expo/\">\n<div class=\"card h-100 my-1\">\n<div class=\"card-body py-2\">\n<p class=\"card-title fs-5 fw-semibold lh-base mb-0\"><i class=\"material-icons align-middle\">navigate_before</i> 快速入门: Expo</p>\n</div>\n</div>\n</a>\n</div>\n<div class=\"col-sm-6 pt-2 doc-prev\">\n<a class=\"ms-auto\" href=\"/docs/app/quickstart/with-ionic-react/\">\n<div class=\"card h-100 my-1 text-end\">\n<div class=\"card-body py-2\">\n<p class=\"card-title fs-5 fw-semibold lh-base mb-0\">快速入门: Ionic React <i class=\"material-icons align-middle\">navigate_next</i></p>\n</div>\n</div>\n</a>\n</div>\n</div>\n</div></div>\n</div>\n</div>\n</div>\n</div>\n\n</main>",
  "markdown": "[MemFireDB备份 6](/)\n\nmenu\n\n[官网](https://memfiredb.com/)\n[论坛](https://community.memfiredb.com/)\n[登录](https://cloud.memfiredb.com/auth/login)\n\nEnable dark mode\n\nEnable light mode\n\n本页\n\nTable of Contents\n\n# 快速入门: Ionic Angular\n\n![](../../img/ionic-demos/ionic-angular-account.png)\n\n### GitHub [*link*](#github)\n\n如果你在阅读指南时遇到困难，请参考[此版本](https://github.com/mhartington/supabase-ionic-angular)\n\n## 构建应用程序 [*link*](#%e6%9e%84%e5%bb%ba%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f)\n\n让我们开始从头开始构建Angular应用程序。\n\n### 初始化一个Ionic Angular应用程序 [*link*](#%e5%88%9d%e5%a7%8b%e5%8c%96%e4%b8%80%e4%b8%aaionic-angular%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f)\n\n我们可以使用[Ionic CLI](https://ionicframework.com/docs/cli)来初始化\n一个名为`supabase-ionic-angular`的应用程序。\n\n```\nnpm install -g @ionic/cli\nionic start supabase-ionic-angular blank --type angular\ncd supabase-ionic-angular\n```\n\n然后让我们安装唯一的额外依赖：[supabase-js](https://github.com/supabase/supabase-js)\n\n```\nnpm install @supabase/supabase-js\n```\n\n最后我们要在`environment.ts`文件中保存环境变量。\n我们所需要的是API URL和你[早些时候]复制的`anon`密钥(#get-theapi-keys)。\n这些变量将暴露在浏览器上，这完全没有问题，因为我们在数据库上启用了[行级安全](/docs/app/development_guide/auth/auth/#row-level-security)。\n\n```\nexport const environment = {\n  production: false,\n  supabaseUrl: 'YOUR_SUPABASE_URL',\n  supabaseKey: 'YOUR_SUPABASE_KEY',\n}\n```\n\n现在我们有了API凭证，让我们用`ionic g s supabase`创建一个**SupabaseService**，以初始化Supabase客户端，并实现与Supabase API通信的功能。\n\n```\nimport { Injectable } from '@angular/core'\nimport { LoadingController, ToastController } from '@ionic/angular'\nimport { AuthChangeEvent, createClient, Session, SupabaseClient } from '@supabase/supabase-js'\nimport { environment } from '../environments/environment'\n\nexport interface Profile {\n  username: string\n  website: string\n  avatar_url: string\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SupabaseService {\n  private supabase: SupabaseClient\n\n  constructor(private loadingCtrl: LoadingController, private toastCtrl: ToastController) {\n    this.supabase = createClient(environment.supabaseUrl, environment.supabaseKey)\n  }\n\n  get user() {\n    return this.supabase.auth.user()\n  }\n\n  get session() {\n    return this.supabase.auth.session()\n  }\n\n  get profile() {\n    return this.supabase\n      .from('profiles')\n      .select(`username, website, avatar_url`)\n      .eq('id', this.user?.id)\n      .single()\n  }\n\n  authChanges(callback: (event: AuthChangeEvent, session: Session | null) => void) {\n    return this.supabase.auth.onAuthStateChange(callback)\n  }\n\n  signIn(email: string) {\n    return this.supabase.auth.signIn({ email })\n  }\n\n  signOut() {\n    return this.supabase.auth.signOut()\n  }\n\n  updateProfile(profile: Profile) {\n    const update = {\n      ...profile,\n      id: this.user?.id,\n      updated_at: new Date(),\n    }\n\n    return this.supabase.from('profiles').upsert(update, {\n      returning: 'minimal', // Don't return the value after inserting\n    })\n  }\n\n  downLoadImage(path: string) {\n    return this.supabase.storage.from('avatars').download(path)\n  }\n\n  uploadAvatar(filePath: string, file: File) {\n    return this.supabase.storage.from('avatars').upload(filePath, file)\n  }\n\n  async createNotice(message: string) {\n    const toast = await this.toastCtrl.create({ message, duration: 5000 })\n    await toast.present()\n  }\n\n  createLoader() {\n    return this.loadingCtrl.create()\n  }\n}\n```\n\n### 设置一个登录路由 [*link*](#%e8%ae%be%e7%bd%ae%e4%b8%80%e4%b8%aa%e7%99%bb%e5%bd%95%e8%b7%af%e7%94%b1)\n\n让我们建立一个路由来管理登录和注册。我们将使用Magic Links，所以用户可以用他们的电子邮件登录，而不需要使用密码。\n用`ionic g page login` Ionic CLI命令创建一个**LoginPage**。\n\n> 本指南将显示模板的内联，但示例应用程序将有templateUrls\n\n```\nimport { Component, OnInit } from '@angular/core'\nimport { SupabaseService } from '../supabase.service'\n\n@Component({\n  selector: 'app-login',\n  template: `\n    <ion-header>\n      <ion-toolbar>\n        <ion-title>Login</ion-title>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content>\n      <div class=\"ion-padding\">\n        <h1>Supabase + Ionic Angular</h1>\n        <p>Sign in via magic link with your email below</p>\n      </div>\n      <ion-list inset=\"true\">\n        <form (ngSubmit)=\"handleLogin($event)\">\n          <ion-item>\n            <ion-label position=\"stacked\">Email</ion-label>\n            <ion-input [(ngModel)]=\"email\" name=\"email\" autocomplete type=\"email\"></ion-input>\n          </ion-item>\n          <div class=\"ion-text-center\">\n            <ion-button type=\"submit\" fill=\"clear\">Login</ion-button>\n          </div>\n        </form>\n      </ion-list>\n    </ion-content>\n  `,\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  email = ''\n  constructor(private readonly supabase: SupabaseService) {}\n\n  ngOnInit() {}\n  async handleLogin(event: any) {\n    event.preventDefault()\n    const loader = await this.supabase.createLoader()\n    await loader.present()\n    try {\n      await this.supabase.signIn(this.email)\n      await loader.dismiss()\n      await this.supabase.createNotice('Check your email for the login link!')\n    } catch (error) {\n      await loader.dismiss()\n      await this.supabase.createNotice(error.error_description || error.message)\n    }\n  }\n}\n```\n\n### 账号页面 [*link*](#%e8%b4%a6%e5%8f%b7%e9%a1%b5%e9%9d%a2)\n\n在用户登录后，我们可以让他们编辑他们的个人资料细节和管理他们的账户。\n用`ionic g page account` Ionic CLI命令创建一个**AccountComponent**。\n\n```\nimport { Component, OnInit } from '@angular/core'\nimport { Router } from '@angular/router'\nimport { Profile, SupabaseService } from '../supabase.service'\n\n@Component({\n  selector: 'app-account',\n  template: `\n    <ion-header>\n      <ion-toolbar>\n        <ion-title>Account</ion-title>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content>\n      <form>\n        <ion-item>\n          <ion-label position=\"stacked\">Email</ion-label>\n          <ion-input type=\"email\" [value]=\"session?.user?.email\"></ion-input>\n        </ion-item>\n\n        <ion-item>\n          <ion-label position=\"stacked\">Name</ion-label>\n          <ion-input type=\"text\" name=\"username\" [(ngModel)]=\"profile.username\"></ion-input>\n        </ion-item>\n\n        <ion-item>\n          <ion-label position=\"stacked\">Website</ion-label>\n          <ion-input type=\"url\" name=\"website\" [(ngModel)]=\"profile.website\"></ion-input>\n        </ion-item>\n        <div class=\"ion-text-center\">\n          <ion-button fill=\"clear\" (click)=\"updateProfile()\">Update Profile</ion-button>\n        </div>\n      </form>\n\n      <div class=\"ion-text-center\">\n        <ion-button fill=\"clear\" (click)=\"signOut()\">Log Out</ion-button>\n      </div>\n    </ion-content>\n  `,\n  styleUrls: ['./account.page.scss'],\n})\nexport class AccountPage implements OnInit {\n  profile: Profile = {\n    username: '',\n    avatar_url: '',\n    website: '',\n  }\n\n  session = this.supabase.session\n\n  constructor(private readonly supabase: SupabaseService, private router: Router) {}\n  ngOnInit() {\n    this.getProfile()\n  }\n\n  async getProfile() {\n    try {\n      let { data: profile, error, status } = await this.supabase.profile\n      if (error && status !== 406) {\n        throw error\n      }\n      if (profile) {\n        this.profile = profile\n      }\n    } catch (error) {\n      alert(error.message)\n    }\n  }\n\n  async updateProfile(avatar_url: string = '') {\n    const loader = await this.supabase.createLoader()\n    await loader.present()\n    try {\n      await this.supabase.updateProfile({ ...this.profile, avatar_url })\n      await loader.dismiss()\n      await this.supabase.createNotice('Profile updated!')\n    } catch (error) {\n      await this.supabase.createNotice(error.message)\n    }\n  }\n\n  async signOut() {\n    console.log('testing?')\n    await this.supabase.signOut()\n    this.router.navigate(['/'], { replaceUrl: true })\n  }\n}\n```\n\n### 启动 [*link*](#%e5%90%af%e5%8a%a8)\n\n现在我们已经有了所有的组件，让我们来更新**AppComponent**。\n\n```\nimport { Component } from '@angular/core'\nimport { Router } from '@angular/router'\nimport { SupabaseService } from './supabase.service'\n\n@Component({\n  selector: 'app-root',\n  template: `\n    <ion-app>\n      <ion-router-outlet></ion-router-outlet>\n    </ion-app>\n  `,\n  styleUrls: ['app.component.scss'],\n})\nexport class AppComponent {\n  constructor(private supabase: SupabaseService, private router: Router) {\n    this.supabase.authChanges((_, session) => {\n      console.log(session)\n      if (session?.user) {\n        this.router.navigate(['/account'])\n      }\n    })\n  }\n}\n```\n\n然后更新**AppRoutingModule**\n\n```\nimport { NgModule } from '@angular/core'\nimport { PreloadAllModules, RouterModule, Routes } from '@angular/router'\n\nconst routes: Routes = [\n  {\n    path: '/',\n    loadChildren: () => import('./login/login.module').then((m) => m.LoginPageModule),\n  },\n  {\n    path: 'account',\n    loadChildren: () => import('./account/account.module').then((m) => m.AccountPageModule),\n  },\n]\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, {\n      preloadingStrategy: PreloadAllModules,\n    }),\n  ],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n```\n\n一旦完成，在终端窗口运行这个程序。\n\n```\nionic serve\n```\n\n浏览器将自动打开，显示该应用程序。\n\n![](../../img/ionic-demos/ionic-angular.png)\n\n## 个人资料照片 [*link*](#%e4%b8%aa%e4%ba%ba%e8%b5%84%e6%96%99%e7%85%a7%e7%89%87)\n\n每个Supabase项目都配置了[存储](/docs/app/development_guide/storage/storage/)，用于管理照片和视频等大文件。\n\n### 创建一个上传小部件 [*link*](#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e4%b8%8a%e4%bc%a0%e5%b0%8f%e9%83%a8%e4%bb%b6)\n\n让我们为用户创建一个头像，以便他们可以上传个人资料照片。\n\n首先安装两个包，以便与用户的相机互动。\n\n```\nnpm install @ionic/pwa-elements @capacitor/camera\n```\n\n[CapacitorJS](https://capacitorjs.com)是Ionic的一个跨平台原生运行时间，它使网络应用通过应用商店部署，并提供对原生deavice API的访问。\n\nIonic PWA元素是一个配套的软件包，它将对某些不提供用户界面的浏览器API进行聚填，并提供自定义的Ionic UI。\n\n安装了这些包后，我们可以更新我们的`main.ts`，以包括对Ionic PWA元素的额外引导调用。\n\n```\nimport { enableProdMode } from '@angular/core'\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic'\n\nimport { AppModule } from './app/app.module'\nimport { environment } from './environments/environment'\n\nimport { defineCustomElements } from '@ionic/pwa-elements/loader'\ndefineCustomElements(window)\n\nif (environment.production) {\n  enableProdMode()\n}\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.log(err))\n```\n\n然后用这个Ionic CLI命令创建一个**AvatarComponent**。\n\n```\nionic g component avatar --module=/src/app/account/account.module.ts --create-module\n```\n\n```\nimport { Component, EventEmitter, Input, OnInit, Output } from '@angular/core'\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser'\nimport { SupabaseService } from '../supabase.service'\nimport { Camera, CameraResultType } from '@capacitor/camera'\n@Component({\n  selector: 'app-avatar',\n  template: `\n    <div class=\"avatar_wrapper\" (click)=\"uploadAvatar()\">\n      <img *ngIf=\"_avatarUrl; else noAvatar\" [src]=\"_avatarUrl\" />\n      <ng-template #noAvatar>\n        <ion-icon name=\"person\" class=\"no-avatar\"></ion-icon>\n      </ng-template>\n    </div>\n  `,\n  style: [\n    `\n    :host {\n       display: block;\n       margin: auto;\n       min-height: 150px;\n    }\n     :host .avatar_wrapper {\n       margin: 16px auto 16px;\n       border-radius: 50%;\n       overflow: hidden;\n       height: 150px;\n       aspect-ratio: 1;\n       background: var(--ion-color-step-50);\n       border: thick solid var(--ion-color-step-200);\n    }\n     :host .avatar_wrapper:hover {\n       cursor: pointer;\n    }\n     :host .avatar_wrapper ion-icon.no-avatar {\n       width: 100%;\n       height: 115%;\n    }\n     :host img {\n       display: block;\n       object-fit: cover;\n       width: 100%;\n       height: 100%;\n    }\n  `,\n  ],\n})\nexport class AvatarComponent implements OnInit {\n  _avatarUrl: SafeResourceUrl | undefined\n  uploading = false\n\n  @Input()\n  set avatarUrl(url: string | undefined) {\n    if (url) {\n      this.downloadImage(url)\n    }\n  }\n\n  @Output() upload = new EventEmitter<string>()\n\n  constructor(private readonly supabase: SupabaseService, private readonly dom: DomSanitizer) {}\n\n  ngOnInit() {}\n\n  async downloadImage(path: string) {\n    try {\n      const { data } = await this.supabase.downLoadImage(path)\n      this._avatarUrl = this.dom.bypassSecurityTrustResourceUrl(URL.createObjectURL(data))\n    } catch (error) {\n      console.error('Error downloading image: ', error.message)\n    }\n  }\n\n  async uploadAvatar() {\n    const loader = await this.supabase.createLoader()\n    try {\n      const photo = await Camera.getPhoto({\n        resultType: CameraResultType.DataUrl,\n      })\n\n      const file = await fetch(photo.dataUrl)\n        .then((res) => res.blob())\n        .then((blob) => new File([blob], 'my-file', { type: `image/${photo.format}` }))\n\n      const fileName = `${Math.random()}-${new Date().getTime()}.${photo.format}`\n\n      await loader.present()\n      await this.supabase.uploadAvatar(fileName, file)\n\n      this.upload.emit(fileName)\n    } catch (error) {\n      this.supabase.createNotice(error.message)\n    } finally {\n      loader.dismiss()\n    }\n  }\n}\n```\n\n### 添加新的小组件 [*link*](#%e6%b7%bb%e5%8a%a0%e6%96%b0%e7%9a%84%e5%b0%8f%e7%bb%84%e4%bb%b6)\n\n然后我们可以在**账户组件**的html模板上面添加小部件。\n\n```\ntemplate: `\n<ion-header>\n  <ion-toolbar>\n    <ion-title>Account</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <app-avatar\n    [avatarUrl]=\"this.profile?.avatar_url\"\n    (upload)=\"updateProfile($event)\"\n  ></app-avatar>\n\n<!-- input fields -->\n`\n```\n\n## 下一步 [*link*](#%e4%b8%8b%e4%b8%80%e6%ad%a5)\n\n在这个阶段，你已经有了一个功能完备的应用程序!\n\n* 有问题吗？[在此提问](https://community.memfiredb.com/).\n* 请登录[MemFire Cloud](https://cloud.memfiredb.com/)\n\n## 资源 [*link*](#%e8%b5%84%e6%ba%90)\n\n* [在Ionic Angular中使用Supabase进行认证](https://supabase.com/blog/authentication-in-ionic-angular)\n\n---\n\n[*navigate\\_before* 快速入门: Expo](/docs/app/quickstart/with-expo/)\n\n[快速入门: Ionic React *navigate\\_next*](/docs/app/quickstart/with-ionic-react/)"
}