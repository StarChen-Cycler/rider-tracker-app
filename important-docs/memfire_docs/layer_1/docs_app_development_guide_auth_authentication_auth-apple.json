{
  "url": "https://docs.memfiredb.com/docs/app/development_guide/auth/authentication/auth-apple/",
  "title": "使用Apple登录 | MemFire Cloud在线文档",
  "depth": 1,
  "timestamp": "2025-08-12 17:52:17",
  "html": "<main class=\"page-content bg-transparent\">\n<div class=\"top-header d-print-none\" id=\"top-header\">\n<div class=\"header-bar d-flex justify-content-between\">\n<div class=\"d-flex align-items-center\">\n<a alt=\"HomePage\" aria-label=\"HomePage\" class=\"logo-icon me-3\" href=\"/\">\n<div class=\"small\">\n<!--?xml version=\"1.0\" encoding=\"UTF-8\"?-->\n<svg height=\"112px\" version=\"1.1\" viewbox=\"0 0 99 112\" width=\"99px\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<title>MemFireDB备份 6</title>\n<defs>\n<lineargradient id=\"linearGradient-1\" x1=\"49.9999885%\" x2=\"49.9999885%\" y1=\"98.082503%\" y2=\"0.766550128%\">\n<stop offset=\"0%\" stop-color=\"#ED1C23\"></stop>\n<stop offset=\"100%\" stop-color=\"#FBAF3B\"></stop>\n</lineargradient>\n</defs>\n<g fill=\"none\" fill-rule=\"evenodd\" id=\"定稿\" stroke=\"none\" stroke-width=\"1\">\n<g id=\"MemFireDB备份-6\">\n<polygon fill=\"#F9AE7C\" id=\"Fill-1\" points=\"25.9728553 40.7912363 47.4268317 0.00591833831 1.15453123 26.7215251\"></polygon>\n<polygon fill=\"#F9AE7C\" id=\"Fill-3\" points=\"97.4213117 26.7267606 51.1285247 0.000910513587 72.4242993 40.8351686\"></polygon>\n<polygon fill=\"#F9904A\" id=\"Fill-5\" points=\"24.8347133 42.7618153 0.000455256793 28.682999 0.000455256793 82.1608764\"></polygon>\n<polygon fill=\"url(#linearGradient-1)\" id=\"Fill-7\" points=\"27.6634514 42.4662399 49.279044 109.05096 70.7296059 42.507213 49.2779058 1.3747617\"></polygon>\n<polygon fill=\"#F9904A\" id=\"Fill-9\" points=\"98.5660549 28.6951771 73.5622137 42.8047233 98.5660549 82.1719163\"></polygon>\n<polygon fill=\"#FB6D33\" id=\"Fill-13\" points=\"72.2987623 45.061545 50.7514582 111.900071 97.579172 84.8646465\"></polygon>\n<polygon fill=\"#FB6D33\" id=\"Fill-15\" points=\"26.1006687 45.0226206 0.987565799 84.8644188 47.8095888 111.898705\"></polygon>\n<path d=\"M60.0737516,38.507213 C59.3168872,35.669825 57.0462939,33.3514298 57.0462939,33.3514298 C57.0462939,33.3514298 57.0804382,35.8849338 56.2894295,37.513615 C55.4847631,39.1696116 53.8765685,40.3054773 53.8765685,40.3054773 C53.8765685,40.3054773 56.1016361,33.8840802 54.2715038,30.1247973 C52.0259496,25.5073552 49.1771803,23.3357803 49.1771803,23.3357803 C49.1771803,23.3357803 50.1070423,28.1319107 48.6240432,31.5065016 C47.1672215,34.8264618 42.8058614,36.7260208 40.7241997,38.7132167 C39.1865699,40.1791435 38.0814341,43.0711623 37.6068289,44.4847347 C37.5715465,44.5883056 37.560165,44.6918765 37.5533362,44.7943093 C37.584066,43.9816759 37.8890881,39.8024186 40.9654858,37.4293925 C43.8404325,35.2111538 41.2431925,30.3478731 41.2431925,30.3478731 C41.2431925,30.3478731 41.7212121,32.5638355 40.9939394,34.1401622 C40.2655285,35.7153507 38.7187936,36.5962726 38.0154218,38.259098 C37.3883056,39.7409589 37.5203301,44.1432921 37.5453692,44.8409731 C37.5453692,44.8591834 37.5476455,44.8762555 37.5476455,44.8921895 C37.5476455,44.9263338 37.5487836,44.9456822 37.5487836,44.9456822 L37.5487836,44.9115379 C37.5590269,45.2655001 37.7138142,45.6080808 37.9972116,45.8448143 L48.3713757,55.6442168 C48.8380139,56.0323232 49.5163466,56.0334614 49.9841229,55.6476312 L60.5938825,45.7105136 C60.9034571,45.4544316 61.0719021,45.0686015 61.0457249,44.6656992 C60.9546735,43.2282259 60.5699815,40.3692133 60.0737516,38.507213\" fill=\"#FFFFFF\" id=\"Fill-17\"></path>\n</g>\n</g>\n</svg>\n</div>\n<div class=\"big\">\n<svg height=\"20\" width=\"232\" xmlns=\"http://www.w3.org/2000/svg\"><defs><lineargradient id=\"a\" x1=\"50%\" x2=\"50%\" y1=\"98.083%\" y2=\".767%\"><stop offset=\"0%\" stop-color=\"#ED1C23\"></stop><stop offset=\"100%\" stop-color=\"#FBAF3B\"></stop></lineargradient></defs><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M78.622 12.384l1.596 21.94H77.49l-.847-14.154-8.98 15.523-4.899-15.53-4.416 14.162H55.6l7.085-21.871 5.712 17.174 10.224-17.244zm99.46.382l.324.01.454.036c.085.008.175.018.269.03l.61.096c1.09.203 2.518.644 3.883 1.596l.515.383-.46 3.694-.413-.62-.154-.195-.255-.285c-.765-.802-2.485-2.188-5.23-2.188-4.55 0-8.723 3.809-9.3 8.491-.287 2.311.334 4.469 1.755 6.077 1.342 1.517 3.257 2.354 5.39 2.354 2.606 0 4.58-1.225 5.606-2.04l.359-.3.424-.408.507-.552-.466 3.766-.093.06a12.622 12.622 0 01-4.577 1.842l-.629.1-.53.058-.418.027-.444.003c-2.918-.002-5.532-1.142-7.36-3.21-1.851-2.096-2.67-4.88-2.305-7.837.73-5.88 5.964-10.696 11.806-10.974l.732-.014zm18.174 9.018c1.724 0 3.344.713 4.443 1.956 1.101 1.248 1.59 2.88 1.377 4.596-.432 3.504-3.808 6.466-7.375 6.466-1.728 0-3.348-.715-4.45-1.96-1.096-1.242-1.583-2.864-1.377-4.563.44-3.52 3.818-6.495 7.382-6.495zm19.446.535l-1.486 12.02h-2.558l.16-1.292c-.936.93-2.462 1.755-4.173 1.755-1.318 0-2.48-.492-3.267-1.385-.804-.91-1.168-2.184-1.008-3.497l.9-7.274 2.597-.327-.914 7.402c-.101.785.084 1.466.525 1.968.49.552 1.27.845 2.25.845 1.526 0 3.3-1.155 3.51-2.873l.87-7.015 2.594-.327zm-63.587-.547c1.77 0 3.21.58 4.164 1.678 1.047 1.207 1.48 3.01 1.263 5.233l-.097.771h-9.914c.16 1.896 1.567 2.979 3.895 2.979 1.806 0 2.878-.434 3.868-.961l1.119-.623-.312 2.522-.106.06c-1.224.687-2.604 1.356-4.8 1.356-2.092 0-3.873-.708-5.006-1.992-.991-1.12-1.404-2.599-1.198-4.272.548-4.433 4.001-6.751 7.124-6.751zm-62.717 0c1.771 0 3.211.58 4.164 1.678 1.048 1.207 1.48 3.01 1.263 5.233l-.097.771h-9.914c.16 1.896 1.567 2.979 3.895 2.979 1.622 0 2.652-.35 3.563-.803l.594-.315.83-.466-.312 2.522-.105.06c-1.224.687-2.604 1.356-4.8 1.356-2.093 0-3.874-.708-5.007-1.992-.99-1.12-1.404-2.599-1.197-4.272.547-4.433 4-6.751 7.123-6.751zM231.476 12l-2.767 22.34h-2.556l.197-1.59c-1.104 1.191-2.882 2.021-4.471 2.021-1.781 0-3.24-.583-4.217-1.69-1.02-1.151-1.452-2.817-1.222-4.686.485-3.908 3.43-6.636 7.167-6.636 1.565 0 3.065.832 3.852 2.064l1.356-10.968 2.661-.855zm-42.07.002L186.64 34.34h-2.556l2.664-21.483 2.66-.854zm-56.632 1.268l-1.166 2.527h-9.586l-.85 6.867h6.627v.48h-.12l-.883 1.778v.24h-5.933l-1.138 9.163h-2.729l2.612-21.055h13.166zm2.715 9.038l-1.497 12.017h-2.559l1.455-11.722 2.601-.295zm-24.427-.537c1 0 1.93.427 2.616 1.204.84.95 1.224 2.29 1.053 3.677l-.955 7.673h-2.527l.922-7.445c.13-1.017-.027-1.81-.45-2.287-.326-.367-.815-.554-1.458-.554-1.954 0-3.178 1.346-3.332 2.613l-.955 7.673h-2.556l.922-7.445c.127-1.03-.024-1.826-.442-2.297-.319-.362-.801-.544-1.437-.544-1.522 0-3.3 1.166-3.516 2.901l-.912 7.385h-2.559l1.455-11.722 2.594-.295-.146 1.164c1.027-1.077 2.419-1.701 3.854-1.701 1.375 0 2.58.79 3.226 2.083.914-1.13 2.05-2.083 4.603-2.083zm29.487.532l-.206 1.73c1.082-.978 2.932-1.7 4.514-1.7h.269l-.271 2.282h-.214c-1.814 0-4.469.837-4.7 2.7l-.866 7.01h-2.558l1.45-11.693 2.582-.329zm55.47 1.865c-2.31 0-4.27 1.792-4.563 4.168-.144 1.145.15 2.196.824 2.957.64.725 1.586 1.126 2.656 1.126 2.292 0 4.241-1.78 4.532-4.14.146-1.169-.144-2.237-.821-3.003-.634-.715-1.567-1.108-2.628-1.108zm27.497-.029c-2.278 0-4.15 1.752-4.45 4.17-.149 1.187.137 2.255.8 3.006.611.692 1.526 1.076 2.57 1.076 2.294 0 4.173-1.743 4.468-4.143.152-1.21-.13-2.285-.79-3.033-.623-.704-1.52-1.076-2.598-1.076zm-134.356.045c-1.89 0-3.372 1.094-4.015 2.947h7.164a2.853 2.853 0 00-.71-1.956c-.574-.648-1.416-.991-2.439-.991zm62.715 0c-1.892 0-3.37 1.094-4.013 2.947h7.166a2.867 2.867 0 00-.713-1.956c-.573-.648-1.416-.991-2.44-.991zm-17.267-7.614c.919 0 1.706.748 1.754 1.668a1.587 1.587 0 01-1.603 1.692c-.917 0-1.704-.75-1.754-1.668a1.593 1.593 0 011.603-1.692z\" fill=\"#116\"></path><path d=\"M11.131 17.482L20.326.002.495 11.453zm30.621-6.028L21.912 0l9.127 17.5z\" fill=\"#F9AE7C\"></path><path d=\"M10.643 18.326L0 12.293v22.919z\" fill=\"#F9904A\"></path><path d=\"M11.856 18.2l9.264 28.536 9.193-28.519L21.119.59z\" fill=\"url(#a)\"></path><path d=\"M42.243 12.298l-10.716 6.047 10.716 16.872z\" fill=\"#F9904A\"></path><path d=\"M30.985 19.312l-9.234 28.645L41.82 36.371zm-19.799-.017L.423 36.37 20.49 47.957z\" fill=\"#FB6D33\"></path><path d=\"M25.746 16.503c-.324-1.216-1.298-2.21-1.298-2.21s.015 1.086-.324 1.784c-.345.71-1.034 1.197-1.034 1.197s.954-2.752.17-4.363c-.963-1.98-2.184-2.91-2.184-2.91s.398 2.056-.237 3.502c-.624 1.423-2.494 2.237-3.386 3.088-.659.629-1.132 1.868-1.336 2.474a.509.509 0 00-.023.133c.013-.349.144-2.14 1.463-3.157 1.232-.95.119-3.035.119-3.035s.205.95-.107 1.625c-.312.676-.975 1.053-1.277 1.766-.268.635-.212 2.522-.201 2.82v.023l.001.022v-.014a.54.54 0 00.193.4l4.446 4.2c.2.166.49.166.69.001l4.548-4.259a.535.535 0 00.193-.448c-.039-.616-.203-1.84-.416-2.639\" fill=\"#FFF\"></path></g></svg>\n</div>\n</a>\n<button class=\"btn btn-icon btn-soft\" id=\"close-sidebar\">\n<span class=\"material-icons size-20 menu-icon align-middle\">menu</span>\n</button>\n</div>\n<div class=\"d-flex align-items-center\">\n<ul class=\"list-unstyled mb-0\">\n</ul>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://memfiredb.com/\" target=\"_blank\" type=\"button\">官网</a>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://community.memfiredb.com/\" target=\"_blank\" type=\"button\">论坛</a>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://cloud.memfiredb.com/auth/login\" target=\"_blank\" type=\"button\">登录</a>\n<button aria-label=\"Toggle user interface mode\" class=\"btn btn-icon btn-default ms-2\" id=\"mode\" type=\"button\">\n<span class=\"toggle-dark\">\n<svg fill=\"currentColor\" height=\"30\" viewbox=\"0 0 48 48\" width=\"30\" xmlns=\"http://www.w3.org/2000/svg\">\n<title>Enable dark mode</title>\n<path d=\"M24 42q-7.5 0-12.75-5.25T6 24q0-7.5 5.25-12.75T24 6q.4 0 .85.025.45.025 1.15.075-1.8 1.6-2.8 3.95-1 2.35-1 4.95 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6 0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z\"></path>\n</svg>\n</span>\n<span class=\"toggle-light\">\n<svg fill=\"currentColor\" height=\"30\" viewbox=\"0 0 48 48\" width=\"30\" xmlns=\"http://www.w3.org/2000/svg\">\n<title>Enable light mode</title>\n<path d=\"M24 31q2.9 0 4.95-2.05Q31 26.9 31 24q0-2.9-2.05-4.95Q26.9 17 24 17q-2.9 0-4.95 2.05Q17 21.1 17 24q0 2.9 2.05 4.95Q21.1 31 24 31Zm0 3q-4.15 0-7.075-2.925T14 24q0-4.15 2.925-7.075T24 14q4.15 0 7.075 2.925T34 24q0 4.15-2.925 7.075T24 34ZM3.5 25.5q-.65 0-1.075-.425Q2 24.65 2 24q0-.65.425-1.075Q2.85 22.5 3.5 22.5h5q.65 0 1.075.425Q10 23.35 10 24q0 .65-.425 1.075-.425.425-1.075.425Zm36 0q-.65 0-1.075-.425Q38 24.65 38 24q0-.65.425-1.075.425-.425 1.075-.425h5q.65 0 1.075.425Q46 23.35 46 24q0 .65-.425 1.075-.425.425-1.075.425ZM24 10q-.65 0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 10 24 10Zm0 36q-.65 0-1.075-.425-.425-.425-.425-1.075v-5q0-.65.425-1.075Q23.35 38 24 38q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46ZM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05 0 .6-.4 1-.4.45-1.025.45-.625 0-1.075-.4Zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45ZM33.9 14.1q-.45-.45-.45-1.05 0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4-.625 0-1.075-.4ZM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6 0 1.05.45.45.45.45 1.05 0 .6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425ZM24 24Z\"></path>\n</svg>\n</span>\n</button>\n</div>\n</div>\n</div>\n<div class=\"container-fluid\">\n<div class=\"layout-spacing\">\n<div class=\"d-md-flex justify-content-between align-items-center\"></div>\n<div class=\"row flex-xl-nowrap\">\n<div class=\"docs-toc col-xl-3 d-xl-block\"><toc>\n<div class=\"fw-bold text-uppercase mb-2\">本页</div>\n\n</toc></div>\n<div class=\"docs-toc-mobile d-print-none d-xl-none\">\n<button aria-expanded=\"false\" class=\"btn-secondary dropdown-toggle\" data-bs-offset=\"0,0\" data-bs-toggle=\"dropdown\" id=\"toc-dropdown-btn\" type=\"button\">概述</button>\n</div>\n<div class=\"docs-content col-12 col-xl-9 mt-0\">\n<div class=\"mb-0 d-flex\">\n<h1 class=\"content-title mb-0\">\n                                                    使用Apple登录\n                                                    \n                                                </h1>\n</div>\n<div class=\"main-content\" data-bs-root-margin=\"0px 0px -65%\" data-bs-spy=\"scroll\" data-bs-target=\"#toc-mobile\" id=\"content\">\n<div data-prismjs-copy=\"\" data-prismjs-copy-error=\"\" data-prismjs-copy-success=\"\">\n<p>要为项目启用Apple Auth，您需要设置Apple OAuth应用程序，并将应用程序凭据添加到MemFire Cloud项目仪表板。</p>\n<h2 id=\"概述\">概述 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e6%a6%82%e8%bf%b0\"><i class=\"material-icons align-middle\">link</i></a></h2><p>Apple OAuth包括六大步骤：</p>\n<ul>\n<li>获取具有 <code>使用Apple登录</code> 功能的 <code>App Id</code>。</li>\n<li>获取<code>Services Id</code> - 这将用作 <code>client_id</code>。</li>\n<li>获取用于获取 <code>client_secret</code>的<code>secret key</code>。</li>\n<li>使用 <code>secret key</code>生成<code>client_secret</code>。</li>\n<li>将您的 <code>client id</code>和 <code>client secret</code> 密钥添加到<a href=\"https://cloud.memfiredb.com/\" rel=\"external\" target=\"_blank\">MemFire Clpud Project<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>。</li>\n<li>将登录代码添加到<a href=\"https://github.com/supabase/supabase-js\" rel=\"external\" target=\"_blank\">JS客户端应用程序<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>。</li>\n</ul>\n<h2 id=\"访问您的apple-developer帐户\">访问您的Apple Developer帐户 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e8%ae%bf%e9%97%ae%e6%82%a8%e7%9a%84apple-developer%e5%b8%90%e6%88%b7\"><i class=\"material-icons align-middle\">link</i></a></h2><ul>\n<li>进入<a href=\"https://developer.apple.com\" rel=\"external\" target=\"_blank\">developer.apple.com<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>.</li>\n<li>点击右上方的 <code>账户</code>来登录。</li>\n</ul>\n<img src=\"../../../../img/guides/auth-apple/apple-developer-portal.png\"/>\n<h2 id=\"获取应用程序id\">获取应用程序ID <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e8%8e%b7%e5%8f%96%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8fid\"><i class=\"material-icons align-middle\">link</i></a></h2><ul>\n<li>跳转到<code>Certificates, Identifiers &amp; Profiles</code>文件.</li>\n<li>单击左侧的<code>Identifiers</code>。</li>\n<li>单击左上角<code>Identifiers</code>旁边的<code>+</code>符号。</li>\n<li>选择 <code>App IDs</code>并单击 <code>继续</code>。</li>\n<li>选择 <code>App</code> 类型，然后单击<code>继续</code>。</li>\n<li>填写应用程序信息：\n<ul>\n<li>应用程序描述。</li>\n<li>绑定ID (苹果推荐反向域名风格，所以如果你的域名是acme.com，而您的应用程序称为roadrunner，请使用：<code>com.acme.roadrunner</code>)。</li>\n<li>向下滚动并选中<code>使用Apple登录</code>。</li>\n<li>单击右上角的<code>继续</code>。</li>\n<li>单击右上角的<code>注册</code>。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"获取服务id\">获取服务ID <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e8%8e%b7%e5%8f%96%e6%9c%8d%e5%8a%a1id\"><i class=\"material-icons align-middle\">link</i></a></h2><p>当您进行API调用以验证用户时，这将用作<code>client_id</code>。</p>\n<ul>\n<li>跳转到<code>Certificates, Identifiers &amp; Profiles</code>文件.</li>\n<li>单击左侧的<code>Identifiers</code>。</li>\n<li>单击左上角<code>Identifiers</code>旁边的<code>+</code>符号。</li>\n<li>选择 <code>Services IDs</code> 并单击“继续”。</li>\n<li>填写应用程序信息：\n<ul>\n<li>应用程序描述。</li>\n<li>绑定ID (您不能使用上一步中的同一绑定的ID，但可以在开头添加一些内容，例如<code>app.</code>，使其成为app.com.acme.roadrunner).</li>\n<li>保存此ID – 此ID稍后将成为您的 <code>client_id</code> 。</li>\n<li>单击右上角的<code>继续</code>。</li>\n<li>单击右上角的<code>注册</code>。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"查找您的回调url\">查找您的回调URL <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e6%9f%a5%e6%89%be%e6%82%a8%e7%9a%84%e5%9b%9e%e8%b0%83url\"><i class=\"material-icons align-middle\">link</i></a></h2><p>下一步需要回调URL，如下所示：</p>\n<p><code>https://&lt;project-ref&gt;.supabase.co/auth/v1/callback</code></p>\n<ul>\n<li>转到<a href=\"https://cloud.memfiredb.com\" rel=\"external\" target=\"_blank\">MemFire Cloud项目仪表板<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>.</li>\n<li>单击左侧边栏底部的 <code>设置</code> 图标。</li>\n<li>单击列表中的 <code>API</code> 。</li>\n<li>在 Config / URL下，您将找到您的API URL，您可以单击<code>复制</code>将其复制到剪贴板。</li>\n<li>现在只需在末尾添加 <code>/auth/v1/callback</code> 即可获得完整的<code>OAuth重定向URI</code>。</li>\n</ul>\n<video controls=\"true\" muted=\"\" playsinline=\"\" width=\"99%\">\n<source muted=\"\" playsinline=\"\" src=\"../../../../videos/api/api-url-and-key.mp4\" type=\"video/mp4\"/>\n</video>\n<h2 id=\"配置服务id\">配置服务ID <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e9%85%8d%e7%bd%ae%e6%9c%8d%e5%8a%a1id\"><i class=\"material-icons align-middle\">link</i></a></h2><ul>\n<li>在 <code>Identifiers</code>下，单击新创建的服务ID。</li>\n<li>选中<code>使用Apple登录</code>旁边的复选框以启用它。</li>\n<li>单击右侧的<code>配置</code>。</li>\n<li>确保在<code>Primary App ID</code>下选择了新创建的绑定ID`</li>\n<li>将域添加到<code>域和子域</code>框中（不要添加<code>https://</code>，只添加域）。</li>\n<li>在 <code>Return URLs</code> 框中，键入在上一步中找到的应用程序的回调URL，然后单击右下角的<code>下一步</code>。</li>\n<li>单击底部的<code>完成</code>。</li>\n<li>单击右上角的<code>继续</code>。</li>\n<li>单击右上角的<code>保存</code>。</li>\n</ul>\n<h2 id=\"下载密钥\">下载密钥 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e4%b8%8b%e8%bd%bd%e5%af%86%e9%92%a5\"><i class=\"material-icons align-middle\">link</i></a></h2><p>现在，您需要从Apple下载一个 <code>secret key</code>文件，用于生成 <code>client_secret</code>。</p>\n<ul>\n<li>跳转到<code>Certificates, Identifiers &amp; Profiles</code>文件.</li>\n<li>单击左侧的<code>Keys</code>。</li>\n<li>单击左上角<code>Keys</code>旁边的<code>+</code>符号。</li>\n<li>输入<code>Key Name</code>。</li>\n<li>选中<code>使用Apple登录</code>。</li>\n<li>单击右上角的<code>保存</code>。</li>\n<li>从下拉选择器中选择新创建的服务ID。</li>\n<li>单击右上角的<code>保存</code>。</li>\n<li>单击右上角的<code>继续</code>。</li>\n<li>单击右上角的<code>注册</code>。</li>\n<li>单击右上角的<code>下载</code>。</li>\n<li>保存下载的文件——其中包含用于生成 <code>client_secret</code>的 <code>secret key</code>。</li>\n<li>单击右上角的<code>完成</code>。</li>\n</ul>\n<h2 id=\"生成client_secret\">生成<code>client_secret</code> <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e7%94%9f%e6%88%90client_secret\"><i class=\"material-icons align-middle\">link</i></a></h2><p>您下载的 <code>secret key</code> 用于创建验证用户所需的 <code>client_secret</code> 字符串。</p>\n<p>根据<a href=\"https://developer.apple.com/documentation/signinwithapplerestapi/generate_and_validate_tokens\" rel=\"external\" target=\"_blank\">Apple Docs<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>它必须是JWT，使用具有P-256曲线和SHA-256哈希算法的椭圆曲线数字签名算法（ECDSA）加密的令牌。</p>\n<p>此时，生成此JWT令牌的最简单方法是使用<a href=\"https://www.ruby-lang.org/en/\" rel=\"external\" target=\"_blank\">Ruby<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>。\n如果您没有安装Ruby，可以在此处<a href=\"https://www.ruby-lang.org/en/downloads\" rel=\"external\" target=\"_blank\">下载Ruby<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>。</p>\n<ul>\n<li>安装Ruby（或检查以确保它已安装在您的系统上）。</li>\n<li>安装 <a href=\"https://github.com/jwt/ruby-jwt\" rel=\"external\" target=\"_blank\">ruby-jwt<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>.</li>\n<li>从命令行运行：<code>sudo gem install jwt</code>。</li>\n</ul>\n<p>使用文本编辑器创建以下脚本：<code>secret_gen.rb</code></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-ruby\" id=\"af04d71\" tabindex=\"0\"><code class=\"language-ruby\"><span class=\"token keyword\">require</span> <span class=\"token string-literal\"><span class=\"token string\">\"jwt\"</span></span>\n\nkey_file <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"Path to the private key\"</span></span>\nteam_id <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"Your Team ID\"</span></span>\nclient_id <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"The Service ID of the service you created\"</span></span>\nkey_id <span class=\"token operator\">=</span> <span class=\"token string-literal\"><span class=\"token string\">\"The Key ID of the private key\"</span></span>\n\nvalidity_period <span class=\"token operator\">=</span> <span class=\"token number\">180</span> <span class=\"token comment\"># In days. Max 180 (6 months) according to Apple docs.</span>\n\nprivate_key <span class=\"token operator\">=</span> OpenSSL<span class=\"token double-colon punctuation\">::</span>PKey<span class=\"token double-colon punctuation\">::</span><span class=\"token class-name\">EC</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token builtin\">IO</span><span class=\"token punctuation\">.</span>read key_file\n\ntoken <span class=\"token operator\">=</span> <span class=\"token constant\">JWT</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token symbol\">iss</span><span class=\"token operator\">:</span> team_id<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token symbol\">iat</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Time</span><span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">.</span>to_i<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token symbol\">exp</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Time</span><span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">.</span>to_i <span class=\"token operator\">+</span> <span class=\"token number\">86400</span> <span class=\"token operator\">*</span> validity_period<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token symbol\">aud</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"https://appleid.apple.com\"</span></span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token symbol\">sub</span><span class=\"token operator\">:</span> client_id\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\tprivate_key<span class=\"token punctuation\">,</span>\n\t<span class=\"token string-literal\"><span class=\"token string\">\"ES256\"</span></span><span class=\"token punctuation\">,</span>\n\theader_fields<span class=\"token operator\">=</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token symbol\">kid</span><span class=\"token operator\">:</span> key_id\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\nputs token</code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<ol>\n<li>编辑 <code>secret_gen.rb</code> 文件:</li>\n</ol>\n<ul>\n<li><code>key_file</code> = “从Apple下载的私钥的路径”。它应该是这样的：<code>AuthKey_XXXXXXXX.p8</code>。</li>\n<li><code>team_id</code> = <code>您的团队id</code>。这可以在Apple Developer网站的右上方找到（在您的名字旁边）。</li>\n<li><code>client_id</code> = <code>您创建的服务的服务id</code>。这是您在上述步骤<code>获取服务ID</code>中创建的<code>服务ID</code>。如果您丢失了此ID，可以在Apple开发者网站中找到：\n<ul>\n<li>跳转到<code>Certificates, Identifiers &amp; Profiles</code>文件.</li>\n<li>单击左侧的<code>Identifiers</code>。</li>\n<li>在右上角的下拉列表中，选择<code>服务ID</code>。</li>\n<li>在列表中查找您的Identifier（即app.com.acme.roadrunner）。</li>\n</ul>\n</li>\n<li><code>key_id</code> = <code>私钥的密钥id</code>。这可以在下载的机密文件的名称中找到（对于名为<code>AuthKey_XXXXXXXX.p8</code>的文件，您的key_id为<code>XXXXXXXX</code>）。如果您丢失了此ID，可以在Apple开发者网站中找到：\n<ul>\n<li>跳转到<code>Certificates, Identifiers &amp; Profiles</code>文件.</li>\n<li>单击左侧的<code>Keys</code>。</li>\n<li>单击列表中新创建的密钥。</li>\n<li>在 <code>Key ID</code> 下查找Key_ID。</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li>从命令行运行：<code>ruby secret_gen.rb&gt;client_secret.txt</code>。</li>\n<li>您的 <code>client_secret</code> 现在存储在此 <code>client_secret.txt</code>文件。</li>\n</ol>\n<h2 id=\"将oauth凭据添加到supabase\">将OAuth凭据添加到Supabase <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%b0%86oauth%e5%87%ad%e6%8d%ae%e6%b7%bb%e5%8a%a0%e5%88%b0supabase\"><i class=\"material-icons align-middle\">link</i></a></h2><ul>\n<li>跳转到<a href=\"https://cloud.memfiredb.com\" rel=\"external\" target=\"_blank\">MemFire Cloud 项目仪表<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>.</li>\n<li>在左侧边栏中，单击“身份验证”图标（靠近顶部）。</li>\n<li>单击列表中的<code>设置</code>以转到<code>身份验证设置</code>页面。</li>\n<li>在<code>站点URL</code>下输入应用程序的最终（托管）URL（这很重要）。</li>\n<li>在<code>外部OAuth提供程序</code>下，将<code>Apple Enabled</code>设置为 ON。</li>\n<li>输入前面步骤中保存的 <code>client_id</code> 和 <code>client_secret</code> 。</li>\n<li>单击<code>保存</code>。</li>\n</ul>\n<h2 id=\"将登录代码添加到客户端应用程序\">将登录代码添加到客户端应用程序 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%b0%86%e7%99%bb%e5%bd%95%e4%bb%a3%e7%a0%81%e6%b7%bb%e5%8a%a0%e5%88%b0%e5%ae%a2%e6%88%b7%e7%ab%af%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f\"><i class=\"material-icons align-middle\">link</i></a></h2><p>当您的用户登录时，调用<a data-bs-delay='{\"hide\":300,\"show\":550}' data-bs-html=\"true\" data-bs-title=\"&lt;a href='/docs/app/sdkdocs/javascript/auth/auth-signinwithoauth/'&gt;&lt;p&gt;认证&lt;/p&gt;&lt;strong&gt;signInWithOAuth()&lt;/strong&gt;&lt;br&gt;&lt;/a&gt;\" data-bs-toggle=\"tooltip\" href=\"/docs/app/sdkdocs/javascript/auth/auth-signinwithoauth/\">signInWithOAuth()</a>，并将<code>apple</code>作为<code>provider</code>：</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-js\" id=\"946c279\" tabindex=\"0\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">signInWithApple</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">signInWithOAuth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">provider</span><span class=\"token operator\">:</span> <span class=\"token string\">'apple'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>当用户注销时，调用<a data-bs-delay='{\"hide\":300,\"show\":550}' data-bs-html=\"true\" data-bs-title=\"&lt;a href='/docs/app/sdkdocs/javascript/auth/auth-signout/'&gt;&lt;p&gt;认证&lt;/p&gt;&lt;strong&gt;signOut()&lt;/strong&gt;&lt;br&gt;&lt;/a&gt;\" data-bs-toggle=\"tooltip\" href=\"/docs/app/sdkdocs/javascript/auth/auth-signout/\">signOut()</a> 将其从浏览器会话和localStorage中删除：</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-js\" id=\"3908fd8\" tabindex=\"0\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">signout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> supabase<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span><span class=\"token function\">signOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h2 id=\"资料\">资料 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e8%b5%84%e6%96%99\"><i class=\"material-icons align-middle\">link</i></a></h2><ul>\n<li><a href=\"https://developer.apple.com\" rel=\"external\" target=\"_blank\">Apple开发者帐户<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>.</li>\n<li><a href=\"https://www.ruby-lang.org/en/\" rel=\"external\" target=\"_blank\">Ruby<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a> Docs.</li>\n<li><a href=\"https://github.com/jwt/ruby-jwt\" rel=\"external\" target=\"_blank\">ruby-jwt<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a> library.</li>\n<li>感谢 <a href=\"https://medium.com/@janakda\" rel=\"external\" target=\"_blank\">Janak Amarasena<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a> 在<a href=\"https://medium.com/identity-beyond-borders/how-to-configure-sign-in-with-apple-77c61e336003\" rel=\"external\" target=\"_blank\">如何配置Apple登录<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a>中承担了所有繁重的工作。</li>\n</ul>\n</div>\n</div>\n<div><hr class=\"doc-hr\"/>\n<div class=\"d-print-none\" id=\"doc-nav\">\n<div class=\"row flex-xl-nowrap\">\n<div class=\"col-sm-6 pt-2 doc-next\">\n<a href=\"/docs/app/development_guide/auth/authentication/auth-magic-link/\">\n<div class=\"card h-100 my-1\">\n<div class=\"card-body py-2\">\n<p class=\"card-title fs-5 fw-semibold lh-base mb-0\"><i class=\"material-icons align-middle\">navigate_before</i> 使用Magic Link登录</p>\n</div>\n</div>\n</a>\n</div>\n<div class=\"col-sm-6 pt-2 doc-prev\">\n<a class=\"ms-auto\" href=\"/docs/app/development_guide/auth/authentication/auth-github/\">\n<div class=\"card h-100 my-1 text-end\">\n<div class=\"card-body py-2\">\n<p class=\"card-title fs-5 fw-semibold lh-base mb-0\">使用GitHub登录 <i class=\"material-icons align-middle\">navigate_next</i></p>\n</div>\n</div>\n</a>\n</div>\n</div>\n</div></div>\n</div>\n</div>\n</div>\n</div>\n\n</main>",
  "markdown": "[MemFireDB备份 6](/)\n\nmenu\n\n[官网](https://memfiredb.com/)\n[论坛](https://community.memfiredb.com/)\n[登录](https://cloud.memfiredb.com/auth/login)\n\nEnable dark mode\n\nEnable light mode\n\n本页\n\n概述\n\n# 使用Apple登录\n\n要为项目启用Apple Auth，您需要设置Apple OAuth应用程序，并将应用程序凭据添加到MemFire Cloud项目仪表板。\n\n## 概述 [*link*](#%e6%a6%82%e8%bf%b0)\n\nApple OAuth包括六大步骤：\n\n* 获取具有 `使用Apple登录` 功能的 `App Id`。\n* 获取`Services Id` - 这将用作 `client_id`。\n* 获取用于获取 `client_secret`的`secret key`。\n* 使用 `secret key`生成`client_secret`。\n* 将您的 `client id`和 `client secret` 密钥添加到[MemFire Clpud Project](https://cloud.memfiredb.com/)。\n* 将登录代码添加到[JS客户端应用程序](https://github.com/supabase/supabase-js)。\n\n## 访问您的Apple Developer帐户 [*link*](#%e8%ae%bf%e9%97%ae%e6%82%a8%e7%9a%84apple-developer%e5%b8%90%e6%88%b7)\n\n* 进入[developer.apple.com](https://developer.apple.com).\n* 点击右上方的 `账户`来登录。\n\n![](../../../../img/guides/auth-apple/apple-developer-portal.png)\n\n## 获取应用程序ID [*link*](#%e8%8e%b7%e5%8f%96%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8fid)\n\n* 跳转到`Certificates, Identifiers & Profiles`文件.\n* 单击左侧的`Identifiers`。\n* 单击左上角`Identifiers`旁边的`+`符号。\n* 选择 `App IDs`并单击 `继续`。\n* 选择 `App` 类型，然后单击`继续`。\n* 填写应用程序信息：\n  + 应用程序描述。\n  + 绑定ID (苹果推荐反向域名风格，所以如果你的域名是acme.com，而您的应用程序称为roadrunner，请使用：`com.acme.roadrunner`)。\n  + 向下滚动并选中`使用Apple登录`。\n  + 单击右上角的`继续`。\n  + 单击右上角的`注册`。\n\n## 获取服务ID [*link*](#%e8%8e%b7%e5%8f%96%e6%9c%8d%e5%8a%a1id)\n\n当您进行API调用以验证用户时，这将用作`client_id`。\n\n* 跳转到`Certificates, Identifiers & Profiles`文件.\n* 单击左侧的`Identifiers`。\n* 单击左上角`Identifiers`旁边的`+`符号。\n* 选择 `Services IDs` 并单击“继续”。\n* 填写应用程序信息：\n  + 应用程序描述。\n  + 绑定ID (您不能使用上一步中的同一绑定的ID，但可以在开头添加一些内容，例如`app.`，使其成为app.com.acme.roadrunner).\n  + 保存此ID – 此ID稍后将成为您的 `client_id` 。\n  + 单击右上角的`继续`。\n  + 单击右上角的`注册`。\n\n## 查找您的回调URL [*link*](#%e6%9f%a5%e6%89%be%e6%82%a8%e7%9a%84%e5%9b%9e%e8%b0%83url)\n\n下一步需要回调URL，如下所示：\n\n`https://<project-ref>.supabase.co/auth/v1/callback`\n\n* 转到[MemFire Cloud项目仪表板](https://cloud.memfiredb.com).\n* 单击左侧边栏底部的 `设置` 图标。\n* 单击列表中的 `API` 。\n* 在 Config / URL下，您将找到您的API URL，您可以单击`复制`将其复制到剪贴板。\n* 现在只需在末尾添加 `/auth/v1/callback` 即可获得完整的`OAuth重定向URI`。\n\n[\n\n](../../../../videos/api/api-url-and-key.mp4)\n\n## 配置服务ID [*link*](#%e9%85%8d%e7%bd%ae%e6%9c%8d%e5%8a%a1id)\n\n* 在 `Identifiers`下，单击新创建的服务ID。\n* 选中`使用Apple登录`旁边的复选框以启用它。\n* 单击右侧的`配置`。\n* 确保在`Primary App ID`下选择了新创建的绑定ID`\n* 将域添加到`域和子域`框中（不要添加`https://`，只添加域）。\n* 在 `Return URLs` 框中，键入在上一步中找到的应用程序的回调URL，然后单击右下角的`下一步`。\n* 单击底部的`完成`。\n* 单击右上角的`继续`。\n* 单击右上角的`保存`。\n\n## 下载密钥 [*link*](#%e4%b8%8b%e8%bd%bd%e5%af%86%e9%92%a5)\n\n现在，您需要从Apple下载一个 `secret key`文件，用于生成 `client_secret`。\n\n* 跳转到`Certificates, Identifiers & Profiles`文件.\n* 单击左侧的`Keys`。\n* 单击左上角`Keys`旁边的`+`符号。\n* 输入`Key Name`。\n* 选中`使用Apple登录`。\n* 单击右上角的`保存`。\n* 从下拉选择器中选择新创建的服务ID。\n* 单击右上角的`保存`。\n* 单击右上角的`继续`。\n* 单击右上角的`注册`。\n* 单击右上角的`下载`。\n* 保存下载的文件——其中包含用于生成 `client_secret`的 `secret key`。\n* 单击右上角的`完成`。\n\n## 生成`client_secret` [*link*](#%e7%94%9f%e6%88%90client_secret)\n\n您下载的 `secret key` 用于创建验证用户所需的 `client_secret` 字符串。\n\n根据[Apple Docs](https://developer.apple.com/documentation/signinwithapplerestapi/generate_and_validate_tokens)它必须是JWT，使用具有P-256曲线和SHA-256哈希算法的椭圆曲线数字签名算法（ECDSA）加密的令牌。\n\n此时，生成此JWT令牌的最简单方法是使用[Ruby](https://www.ruby-lang.org/en/)。\n如果您没有安装Ruby，可以在此处[下载Ruby](https://www.ruby-lang.org/en/downloads)。\n\n* 安装Ruby（或检查以确保它已安装在您的系统上）。\n* 安装 [ruby-jwt](https://github.com/jwt/ruby-jwt).\n* 从命令行运行：`sudo gem install jwt`。\n\n使用文本编辑器创建以下脚本：`secret_gen.rb`\n\n```\nrequire \"jwt\"\n\nkey_file = \"Path to the private key\"\nteam_id = \"Your Team ID\"\nclient_id = \"The Service ID of the service you created\"\nkey_id = \"The Key ID of the private key\"\n\nvalidity_period = 180 # In days. Max 180 (6 months) according to Apple docs.\n\nprivate_key = OpenSSL::PKey::EC.new IO.read key_file\n\ntoken = JWT.encode(\n\t{\n\t\tiss: team_id,\n\t\tiat: Time.now.to_i,\n\t\texp: Time.now.to_i + 86400 * validity_period,\n\t\taud: \"https://appleid.apple.com\",\n\t\tsub: client_id\n\t},\n\tprivate_key,\n\t\"ES256\",\n\theader_fields=\n\t{\n\t\tkid: key_id\n\t}\n)\nputs token\n```\n\n1. 编辑 `secret_gen.rb` 文件:\n\n* `key_file` = “从Apple下载的私钥的路径”。它应该是这样的：`AuthKey_XXXXXXXX.p8`。\n* `team_id` = `您的团队id`。这可以在Apple Developer网站的右上方找到（在您的名字旁边）。\n* `client_id` = `您创建的服务的服务id`。这是您在上述步骤`获取服务ID`中创建的`服务ID`。如果您丢失了此ID，可以在Apple开发者网站中找到：\n  + 跳转到`Certificates, Identifiers & Profiles`文件.\n  + 单击左侧的`Identifiers`。\n  + 在右上角的下拉列表中，选择`服务ID`。\n  + 在列表中查找您的Identifier（即app.com.acme.roadrunner）。\n* `key_id` = `私钥的密钥id`。这可以在下载的机密文件的名称中找到（对于名为`AuthKey_XXXXXXXX.p8`的文件，您的key\\_id为`XXXXXXXX`）。如果您丢失了此ID，可以在Apple开发者网站中找到：\n  + 跳转到`Certificates, Identifiers & Profiles`文件.\n  + 单击左侧的`Keys`。\n  + 单击列表中新创建的密钥。\n  + 在 `Key ID` 下查找Key\\_ID。\n\n2. 从命令行运行：`ruby secret_gen.rb>client_secret.txt`。\n3. 您的 `client_secret` 现在存储在此 `client_secret.txt`文件。\n\n## 将OAuth凭据添加到Supabase [*link*](#%e5%b0%86oauth%e5%87%ad%e6%8d%ae%e6%b7%bb%e5%8a%a0%e5%88%b0supabase)\n\n* 跳转到[MemFire Cloud 项目仪表](https://cloud.memfiredb.com).\n* 在左侧边栏中，单击“身份验证”图标（靠近顶部）。\n* 单击列表中的`设置`以转到`身份验证设置`页面。\n* 在`站点URL`下输入应用程序的最终（托管）URL（这很重要）。\n* 在`外部OAuth提供程序`下，将`Apple Enabled`设置为 ON。\n* 输入前面步骤中保存的 `client_id` 和 `client_secret` 。\n* 单击`保存`。\n\n## 将登录代码添加到客户端应用程序 [*link*](#%e5%b0%86%e7%99%bb%e5%bd%95%e4%bb%a3%e7%a0%81%e6%b7%bb%e5%8a%a0%e5%88%b0%e5%ae%a2%e6%88%b7%e7%ab%af%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f)\n\n当您的用户登录时，调用[signInWithOAuth()](/docs/app/sdkdocs/javascript/auth/auth-signinwithoauth/)，并将`apple`作为`provider`：\n\n```\nasync function signInWithApple() {\n  const { data, error } = await supabase.auth.signInWithOAuth({\n    provider: 'apple',\n  })\n}\n```\n\n当用户注销时，调用[signOut()](/docs/app/sdkdocs/javascript/auth/auth-signout/) 将其从浏览器会话和localStorage中删除：\n\n```\nasync function signout() {\n  const { error } = await supabase.auth.signOut()\n}\n```\n\n## 资料 [*link*](#%e8%b5%84%e6%96%99)\n\n* [Apple开发者帐户](https://developer.apple.com).\n* [Ruby](https://www.ruby-lang.org/en/) Docs.\n* [ruby-jwt](https://github.com/jwt/ruby-jwt) library.\n* 感谢 [Janak Amarasena](https://medium.com/@janakda) 在[如何配置Apple登录](https://medium.com/identity-beyond-borders/how-to-configure-sign-in-with-apple-77c61e336003)中承担了所有繁重的工作。\n\n---\n\n[*navigate\\_before* 使用Magic Link登录](/docs/app/development_guide/auth/authentication/auth-magic-link/)\n\n[使用GitHub登录 *navigate\\_next*](/docs/app/development_guide/auth/authentication/auth-github/)"
}