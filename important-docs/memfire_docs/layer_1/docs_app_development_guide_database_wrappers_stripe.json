{
  "url": "https://docs.memfiredb.com/docs/app/development_guide/database/wrappers/stripe/",
  "title": "Stripe | MemFire Cloud在线文档",
  "depth": 1,
  "timestamp": "2025-08-12 17:39:12",
  "html": "<main class=\"page-content bg-transparent\">\n<div class=\"top-header d-print-none\" id=\"top-header\">\n<div class=\"header-bar d-flex justify-content-between\">\n<div class=\"d-flex align-items-center\">\n<a alt=\"HomePage\" aria-label=\"HomePage\" class=\"logo-icon me-3\" href=\"/\">\n<div class=\"small\">\n<!--?xml version=\"1.0\" encoding=\"UTF-8\"?-->\n<svg height=\"112px\" version=\"1.1\" viewbox=\"0 0 99 112\" width=\"99px\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<title>MemFireDB备份 6</title>\n<defs>\n<lineargradient id=\"linearGradient-1\" x1=\"49.9999885%\" x2=\"49.9999885%\" y1=\"98.082503%\" y2=\"0.766550128%\">\n<stop offset=\"0%\" stop-color=\"#ED1C23\"></stop>\n<stop offset=\"100%\" stop-color=\"#FBAF3B\"></stop>\n</lineargradient>\n</defs>\n<g fill=\"none\" fill-rule=\"evenodd\" id=\"定稿\" stroke=\"none\" stroke-width=\"1\">\n<g id=\"MemFireDB备份-6\">\n<polygon fill=\"#F9AE7C\" id=\"Fill-1\" points=\"25.9728553 40.7912363 47.4268317 0.00591833831 1.15453123 26.7215251\"></polygon>\n<polygon fill=\"#F9AE7C\" id=\"Fill-3\" points=\"97.4213117 26.7267606 51.1285247 0.000910513587 72.4242993 40.8351686\"></polygon>\n<polygon fill=\"#F9904A\" id=\"Fill-5\" points=\"24.8347133 42.7618153 0.000455256793 28.682999 0.000455256793 82.1608764\"></polygon>\n<polygon fill=\"url(#linearGradient-1)\" id=\"Fill-7\" points=\"27.6634514 42.4662399 49.279044 109.05096 70.7296059 42.507213 49.2779058 1.3747617\"></polygon>\n<polygon fill=\"#F9904A\" id=\"Fill-9\" points=\"98.5660549 28.6951771 73.5622137 42.8047233 98.5660549 82.1719163\"></polygon>\n<polygon fill=\"#FB6D33\" id=\"Fill-13\" points=\"72.2987623 45.061545 50.7514582 111.900071 97.579172 84.8646465\"></polygon>\n<polygon fill=\"#FB6D33\" id=\"Fill-15\" points=\"26.1006687 45.0226206 0.987565799 84.8644188 47.8095888 111.898705\"></polygon>\n<path d=\"M60.0737516,38.507213 C59.3168872,35.669825 57.0462939,33.3514298 57.0462939,33.3514298 C57.0462939,33.3514298 57.0804382,35.8849338 56.2894295,37.513615 C55.4847631,39.1696116 53.8765685,40.3054773 53.8765685,40.3054773 C53.8765685,40.3054773 56.1016361,33.8840802 54.2715038,30.1247973 C52.0259496,25.5073552 49.1771803,23.3357803 49.1771803,23.3357803 C49.1771803,23.3357803 50.1070423,28.1319107 48.6240432,31.5065016 C47.1672215,34.8264618 42.8058614,36.7260208 40.7241997,38.7132167 C39.1865699,40.1791435 38.0814341,43.0711623 37.6068289,44.4847347 C37.5715465,44.5883056 37.560165,44.6918765 37.5533362,44.7943093 C37.584066,43.9816759 37.8890881,39.8024186 40.9654858,37.4293925 C43.8404325,35.2111538 41.2431925,30.3478731 41.2431925,30.3478731 C41.2431925,30.3478731 41.7212121,32.5638355 40.9939394,34.1401622 C40.2655285,35.7153507 38.7187936,36.5962726 38.0154218,38.259098 C37.3883056,39.7409589 37.5203301,44.1432921 37.5453692,44.8409731 C37.5453692,44.8591834 37.5476455,44.8762555 37.5476455,44.8921895 C37.5476455,44.9263338 37.5487836,44.9456822 37.5487836,44.9456822 L37.5487836,44.9115379 C37.5590269,45.2655001 37.7138142,45.6080808 37.9972116,45.8448143 L48.3713757,55.6442168 C48.8380139,56.0323232 49.5163466,56.0334614 49.9841229,55.6476312 L60.5938825,45.7105136 C60.9034571,45.4544316 61.0719021,45.0686015 61.0457249,44.6656992 C60.9546735,43.2282259 60.5699815,40.3692133 60.0737516,38.507213\" fill=\"#FFFFFF\" id=\"Fill-17\"></path>\n</g>\n</g>\n</svg>\n</div>\n<div class=\"big\">\n<svg height=\"20\" width=\"232\" xmlns=\"http://www.w3.org/2000/svg\"><defs><lineargradient id=\"a\" x1=\"50%\" x2=\"50%\" y1=\"98.083%\" y2=\".767%\"><stop offset=\"0%\" stop-color=\"#ED1C23\"></stop><stop offset=\"100%\" stop-color=\"#FBAF3B\"></stop></lineargradient></defs><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M78.622 12.384l1.596 21.94H77.49l-.847-14.154-8.98 15.523-4.899-15.53-4.416 14.162H55.6l7.085-21.871 5.712 17.174 10.224-17.244zm99.46.382l.324.01.454.036c.085.008.175.018.269.03l.61.096c1.09.203 2.518.644 3.883 1.596l.515.383-.46 3.694-.413-.62-.154-.195-.255-.285c-.765-.802-2.485-2.188-5.23-2.188-4.55 0-8.723 3.809-9.3 8.491-.287 2.311.334 4.469 1.755 6.077 1.342 1.517 3.257 2.354 5.39 2.354 2.606 0 4.58-1.225 5.606-2.04l.359-.3.424-.408.507-.552-.466 3.766-.093.06a12.622 12.622 0 01-4.577 1.842l-.629.1-.53.058-.418.027-.444.003c-2.918-.002-5.532-1.142-7.36-3.21-1.851-2.096-2.67-4.88-2.305-7.837.73-5.88 5.964-10.696 11.806-10.974l.732-.014zm18.174 9.018c1.724 0 3.344.713 4.443 1.956 1.101 1.248 1.59 2.88 1.377 4.596-.432 3.504-3.808 6.466-7.375 6.466-1.728 0-3.348-.715-4.45-1.96-1.096-1.242-1.583-2.864-1.377-4.563.44-3.52 3.818-6.495 7.382-6.495zm19.446.535l-1.486 12.02h-2.558l.16-1.292c-.936.93-2.462 1.755-4.173 1.755-1.318 0-2.48-.492-3.267-1.385-.804-.91-1.168-2.184-1.008-3.497l.9-7.274 2.597-.327-.914 7.402c-.101.785.084 1.466.525 1.968.49.552 1.27.845 2.25.845 1.526 0 3.3-1.155 3.51-2.873l.87-7.015 2.594-.327zm-63.587-.547c1.77 0 3.21.58 4.164 1.678 1.047 1.207 1.48 3.01 1.263 5.233l-.097.771h-9.914c.16 1.896 1.567 2.979 3.895 2.979 1.806 0 2.878-.434 3.868-.961l1.119-.623-.312 2.522-.106.06c-1.224.687-2.604 1.356-4.8 1.356-2.092 0-3.873-.708-5.006-1.992-.991-1.12-1.404-2.599-1.198-4.272.548-4.433 4.001-6.751 7.124-6.751zm-62.717 0c1.771 0 3.211.58 4.164 1.678 1.048 1.207 1.48 3.01 1.263 5.233l-.097.771h-9.914c.16 1.896 1.567 2.979 3.895 2.979 1.622 0 2.652-.35 3.563-.803l.594-.315.83-.466-.312 2.522-.105.06c-1.224.687-2.604 1.356-4.8 1.356-2.093 0-3.874-.708-5.007-1.992-.99-1.12-1.404-2.599-1.197-4.272.547-4.433 4-6.751 7.123-6.751zM231.476 12l-2.767 22.34h-2.556l.197-1.59c-1.104 1.191-2.882 2.021-4.471 2.021-1.781 0-3.24-.583-4.217-1.69-1.02-1.151-1.452-2.817-1.222-4.686.485-3.908 3.43-6.636 7.167-6.636 1.565 0 3.065.832 3.852 2.064l1.356-10.968 2.661-.855zm-42.07.002L186.64 34.34h-2.556l2.664-21.483 2.66-.854zm-56.632 1.268l-1.166 2.527h-9.586l-.85 6.867h6.627v.48h-.12l-.883 1.778v.24h-5.933l-1.138 9.163h-2.729l2.612-21.055h13.166zm2.715 9.038l-1.497 12.017h-2.559l1.455-11.722 2.601-.295zm-24.427-.537c1 0 1.93.427 2.616 1.204.84.95 1.224 2.29 1.053 3.677l-.955 7.673h-2.527l.922-7.445c.13-1.017-.027-1.81-.45-2.287-.326-.367-.815-.554-1.458-.554-1.954 0-3.178 1.346-3.332 2.613l-.955 7.673h-2.556l.922-7.445c.127-1.03-.024-1.826-.442-2.297-.319-.362-.801-.544-1.437-.544-1.522 0-3.3 1.166-3.516 2.901l-.912 7.385h-2.559l1.455-11.722 2.594-.295-.146 1.164c1.027-1.077 2.419-1.701 3.854-1.701 1.375 0 2.58.79 3.226 2.083.914-1.13 2.05-2.083 4.603-2.083zm29.487.532l-.206 1.73c1.082-.978 2.932-1.7 4.514-1.7h.269l-.271 2.282h-.214c-1.814 0-4.469.837-4.7 2.7l-.866 7.01h-2.558l1.45-11.693 2.582-.329zm55.47 1.865c-2.31 0-4.27 1.792-4.563 4.168-.144 1.145.15 2.196.824 2.957.64.725 1.586 1.126 2.656 1.126 2.292 0 4.241-1.78 4.532-4.14.146-1.169-.144-2.237-.821-3.003-.634-.715-1.567-1.108-2.628-1.108zm27.497-.029c-2.278 0-4.15 1.752-4.45 4.17-.149 1.187.137 2.255.8 3.006.611.692 1.526 1.076 2.57 1.076 2.294 0 4.173-1.743 4.468-4.143.152-1.21-.13-2.285-.79-3.033-.623-.704-1.52-1.076-2.598-1.076zm-134.356.045c-1.89 0-3.372 1.094-4.015 2.947h7.164a2.853 2.853 0 00-.71-1.956c-.574-.648-1.416-.991-2.439-.991zm62.715 0c-1.892 0-3.37 1.094-4.013 2.947h7.166a2.867 2.867 0 00-.713-1.956c-.573-.648-1.416-.991-2.44-.991zm-17.267-7.614c.919 0 1.706.748 1.754 1.668a1.587 1.587 0 01-1.603 1.692c-.917 0-1.704-.75-1.754-1.668a1.593 1.593 0 011.603-1.692z\" fill=\"#116\"></path><path d=\"M11.131 17.482L20.326.002.495 11.453zm30.621-6.028L21.912 0l9.127 17.5z\" fill=\"#F9AE7C\"></path><path d=\"M10.643 18.326L0 12.293v22.919z\" fill=\"#F9904A\"></path><path d=\"M11.856 18.2l9.264 28.536 9.193-28.519L21.119.59z\" fill=\"url(#a)\"></path><path d=\"M42.243 12.298l-10.716 6.047 10.716 16.872z\" fill=\"#F9904A\"></path><path d=\"M30.985 19.312l-9.234 28.645L41.82 36.371zm-19.799-.017L.423 36.37 20.49 47.957z\" fill=\"#FB6D33\"></path><path d=\"M25.746 16.503c-.324-1.216-1.298-2.21-1.298-2.21s.015 1.086-.324 1.784c-.345.71-1.034 1.197-1.034 1.197s.954-2.752.17-4.363c-.963-1.98-2.184-2.91-2.184-2.91s.398 2.056-.237 3.502c-.624 1.423-2.494 2.237-3.386 3.088-.659.629-1.132 1.868-1.336 2.474a.509.509 0 00-.023.133c.013-.349.144-2.14 1.463-3.157 1.232-.95.119-3.035.119-3.035s.205.95-.107 1.625c-.312.676-.975 1.053-1.277 1.766-.268.635-.212 2.522-.201 2.82v.023l.001.022v-.014a.54.54 0 00.193.4l4.446 4.2c.2.166.49.166.69.001l4.548-4.259a.535.535 0 00.193-.448c-.039-.616-.203-1.84-.416-2.639\" fill=\"#FFF\"></path></g></svg>\n</div>\n</a>\n<button class=\"btn btn-icon btn-soft\" id=\"close-sidebar\">\n<span class=\"material-icons size-20 menu-icon align-middle\">menu</span>\n</button>\n</div>\n<div class=\"d-flex align-items-center\">\n<ul class=\"list-unstyled mb-0\">\n</ul>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://memfiredb.com/\" target=\"_blank\" type=\"button\">官网</a>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://community.memfiredb.com/\" target=\"_blank\" type=\"button\">论坛</a>\n<a class=\"btn btn-icon btn-default ms-4\" href=\"https://cloud.memfiredb.com/auth/login\" target=\"_blank\" type=\"button\">登录</a>\n<button aria-label=\"Toggle user interface mode\" class=\"btn btn-icon btn-default ms-2\" id=\"mode\" type=\"button\">\n<span class=\"toggle-dark\">\n<svg fill=\"currentColor\" height=\"30\" viewbox=\"0 0 48 48\" width=\"30\" xmlns=\"http://www.w3.org/2000/svg\">\n<title>Enable dark mode</title>\n<path d=\"M24 42q-7.5 0-12.75-5.25T6 24q0-7.5 5.25-12.75T24 6q.4 0 .85.025.45.025 1.15.075-1.8 1.6-2.8 3.95-1 2.35-1 4.95 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6 0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z\"></path>\n</svg>\n</span>\n<span class=\"toggle-light\">\n<svg fill=\"currentColor\" height=\"30\" viewbox=\"0 0 48 48\" width=\"30\" xmlns=\"http://www.w3.org/2000/svg\">\n<title>Enable light mode</title>\n<path d=\"M24 31q2.9 0 4.95-2.05Q31 26.9 31 24q0-2.9-2.05-4.95Q26.9 17 24 17q-2.9 0-4.95 2.05Q17 21.1 17 24q0 2.9 2.05 4.95Q21.1 31 24 31Zm0 3q-4.15 0-7.075-2.925T14 24q0-4.15 2.925-7.075T24 14q4.15 0 7.075 2.925T34 24q0 4.15-2.925 7.075T24 34ZM3.5 25.5q-.65 0-1.075-.425Q2 24.65 2 24q0-.65.425-1.075Q2.85 22.5 3.5 22.5h5q.65 0 1.075.425Q10 23.35 10 24q0 .65-.425 1.075-.425.425-1.075.425Zm36 0q-.65 0-1.075-.425Q38 24.65 38 24q0-.65.425-1.075.425-.425 1.075-.425h5q.65 0 1.075.425Q46 23.35 46 24q0 .65-.425 1.075-.425.425-1.075.425ZM24 10q-.65 0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 10 24 10Zm0 36q-.65 0-1.075-.425-.425-.425-.425-1.075v-5q0-.65.425-1.075Q23.35 38 24 38q.65 0 1.075.425.425.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46ZM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05 0 .6-.4 1-.4.45-1.025.45-.625 0-1.075-.4Zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45ZM33.9 14.1q-.45-.45-.45-1.05 0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4-.625 0-1.075-.4ZM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6 0 1.05.45.45.45.45 1.05 0 .6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425ZM24 24Z\"></path>\n</svg>\n</span>\n</button>\n</div>\n</div>\n</div>\n<div class=\"container-fluid\">\n<div class=\"layout-spacing\">\n<div class=\"d-md-flex justify-content-between align-items-center\"></div>\n<div class=\"row flex-xl-nowrap\">\n<div class=\"docs-toc col-xl-3 d-xl-block\"><toc>\n<div class=\"fw-bold text-uppercase mb-2\">本页</div>\n\n</toc></div>\n<div class=\"docs-toc-mobile d-print-none d-xl-none\">\n<button aria-expanded=\"false\" class=\"btn-secondary dropdown-toggle\" data-bs-offset=\"0,0\" data-bs-toggle=\"dropdown\" id=\"toc-dropdown-btn\" type=\"button\">准备</button>\n</div>\n<div class=\"docs-content col-12 col-xl-9 mt-0\">\n<div class=\"mb-0 d-flex\">\n<h1 class=\"content-title mb-0\">\n                                                    Stripe\n                                                    \n                                                </h1>\n</div>\n<div class=\"main-content\" data-bs-root-margin=\"0px 0px -65%\" data-bs-spy=\"scroll\" data-bs-target=\"#toc-mobile\" id=\"content\">\n<div data-prismjs-copy=\"\" data-prismjs-copy-error=\"\" data-prismjs-copy-success=\"\">\n<p>Stripe 是一个由 API 驱动的在线支付处理工具。<code>supabase/wrappers</code> 提供了以下端点。</p>\n<h2 id=\"准备\">准备 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%87%86%e5%a4%87\"><i class=\"material-icons align-middle\">link</i></a></h2><p>在开始之前，请确保您的数据库上安装了 <code>wrappers</code> 扩展：</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"d054bd1\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> extension <span class=\"token keyword\">if</span> <span class=\"token operator\">not</span> <span class=\"token keyword\">exists</span> wrappers <span class=\"token keyword\">with</span> <span class=\"token keyword\">schema</span> extensions<span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>然后创建外部数据封装器：</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"3592b5e\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">data</span> wrapper stripe_wrapper\n<span class=\"token keyword\">handler</span> stripe_fdw_handler\nvalidator stripe_fdw_validator<span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"安全保护您的凭证可选\">安全保护您的凭证（可选） <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%ae%89%e5%85%a8%e4%bf%9d%e6%8a%a4%e6%82%a8%e7%9a%84%e5%87%ad%e8%af%81%e5%8f%af%e9%80%89\"><i class=\"material-icons align-middle\">link</i></a></h3><p>默认情况下，Postgres 将 FDW 凭证以明文形式存储在 <code>pg_catalog.pg_foreign_server</code> 中。任何有权访问此表的人都能够查看这些凭证。封装器设计为与 <a href=\"https://supabase.com/docs/guides/database/vault\" rel=\"external\" target=\"_blank\">Vault<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a> 配合使用，Vault 提供了额外的安全级别来存储凭证。我们建议您使用 Vault 存储您的凭证。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"6a849ce\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token comment\">-- Save your Stripe API key in Vault and retrieve the `key_id`</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> vault<span class=\"token punctuation\">.</span>secrets <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> secret<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token string\">'stripe'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'YOUR_SECRET'</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">returning</span> key_id<span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"连接到-stripe\">连接到 Stripe <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e8%bf%9e%e6%8e%a5%e5%88%b0-stripe\"><i class=\"material-icons align-middle\">link</i></a></h3><p>我们需要为 Postgres 提供连接到 Stripe 的凭证和任何额外的选项。我们可以使用 <code>create server</code> 命令来完成这个操作：</p>\n<p>使用 Vault</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"364350f\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> server stripe_server\n<span class=\"token keyword\">foreign</span> <span class=\"token keyword\">data</span> wrapper stripe_wrapper\noptions <span class=\"token punctuation\">(</span>\n  api_key_id <span class=\"token string\">'&lt;key_ID&gt;'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">-- The Key ID from above, required.</span>\n  api_url <span class=\"token string\">'https://api.stripe.com/v1/'</span>  <span class=\"token comment\">-- Stripe API base URL, optional. Default is 'https://api.stripe.com/v1/'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>不使用 Vault</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"2bdf91a\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> server stripe_server\n<span class=\"token keyword\">foreign</span> <span class=\"token keyword\">data</span> wrapper stripe_wrapper\noptions <span class=\"token punctuation\">(</span>\n  api_key <span class=\"token string\">'&lt;Stripe API Key&gt;'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">-- Stripe API key, required</span>\n  api_url <span class=\"token string\">'https://api.stripe.com/v1/'</span>  <span class=\"token comment\">-- Stripe API base URL, optional. Default is 'https://api.stripe.com/v1/'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h2 id=\"创建外部表\">创建外部表 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%88%9b%e5%bb%ba%e5%a4%96%e9%83%a8%e8%a1%a8\"><i class=\"material-icons align-middle\">link</i></a></h2><p>Stripe 封装器支持从 Stripe API 读取和修改数据。.</p>\n<table>\n<thead>\n<tr>\n<th>Object</th>\n<th style=\"text-align:center\">Select</th>\n<th style=\"text-align:center\">Insert</th>\n<th style=\"text-align:center\">Update</th>\n<th style=\"text-align:center\">Delete</th>\n<th style=\"text-align:center\">Truncate</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/accounts/list\" rel=\"external\" target=\"_blank\">Accounts<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/balance\" rel=\"external\" target=\"_blank\">Balance<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/balance_transactions/list\" rel=\"external\" target=\"_blank\">Balance Transactions<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/charges/list\" rel=\"external\" target=\"_blank\">Charges<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/checkout/sessions/list\" rel=\"external\" target=\"_blank\">Checkout Sessions<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/customers/list\" rel=\"external\" target=\"_blank\">Customers<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/disputes/list\" rel=\"external\" target=\"_blank\">Disputes<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/events/list\" rel=\"external\" target=\"_blank\">Events<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/files/list\" rel=\"external\" target=\"_blank\">Files<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/file_links/list\" rel=\"external\" target=\"_blank\">File Links<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/invoices/list\" rel=\"external\" target=\"_blank\">Invoices<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/mandates\" rel=\"external\" target=\"_blank\">Mandates<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/payment_intents/list\" rel=\"external\" target=\"_blank\">PaymentIntents<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/payouts/list\" rel=\"external\" target=\"_blank\">Payouts<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/prices/list\" rel=\"external\" target=\"_blank\">Prices<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/products/list\" rel=\"external\" target=\"_blank\">Products<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/refunds/list\" rel=\"external\" target=\"_blank\">Refunds<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/setup_attempts/list\" rel=\"external\" target=\"_blank\">SetupAttempts<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/setup_intents/list\" rel=\"external\" target=\"_blank\">SetupIntents<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/subscriptions/list\" rel=\"external\" target=\"_blank\">Subscriptions<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/tokens\" rel=\"external\" target=\"_blank\">Tokens<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/topups/list\" rel=\"external\" target=\"_blank\">Topups<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n<tr>\n<td><a href=\"https://stripe.com/docs/api/transfers/list\" rel=\"external\" target=\"_blank\">Transfers<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></td>\n<td style=\"text-align:center\">✅</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n<td style=\"text-align:center\">❌</td>\n</tr>\n</tbody>\n</table>\n<p>Stripe 外部表反映了 Stripe 的 API。我们可以创建一个模式来容纳所有 Stripe 表。</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"0ff7215\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">schema</span> stripe<span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>然后创建外部表，例如：</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"fc545d5\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>accounts <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  business_type <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  country <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  email <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">type</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'accounts'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p><code>attrs</code> 是一个特殊列，它以 JSON 格式存储所有对象属性，您可以从中提取任何需要的属性或其关联的子对象。请参阅下面的更多示例。</p>\n<h3 id=\"accounts\">Accounts <a aria-hidden=\"true\" class=\"anchor\" href=\"#accounts\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>这是一个代表 Stripe 账户的对象。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/accounts/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"91e1e2f\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>accounts <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  business_type <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  country <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  email <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">type</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'accounts'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许任何列，但按以下方式过滤最高效：</p>\n<ul>\n<li>id</li>\n</ul>\n<h3 id=\"balance\">Balance <a aria-hidden=\"true\" class=\"anchor\" href=\"#balance\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>显示您 Stripe 账户当前的余额。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/balance\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"3f5142c\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>balance <span class=\"token punctuation\">(</span>\n  balance_type <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'balance'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"balance-transactions\">Balance Transactions <a aria-hidden=\"true\" class=\"anchor\" href=\"#balance-transactions\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>余额交易代表通过您的 Stripe 账户的资金流动。它们为您的 Stripe 账户余额中进出的每种交易类型创建。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/balance_transactions/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"84cc46d\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>balance_transactions <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  description <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  fee <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  net <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">type</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'balance_transactions'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许任何列，但按以下方式过滤最高效：</p>\n<ul>\n<li>id</li>\n<li>type</li>\n</ul>\n<h3 id=\"charges\">Charges <a aria-hidden=\"true\" class=\"anchor\" href=\"#charges\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>要对信用卡或借记卡进行收费，您需要创建一个 Charge 对象。您可以检索和退款个别收费，以及列出所有收费。收费由一个唯一的随机 ID 标识。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/charges/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"4dc8356\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>charges <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  customer <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  description <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  invoice <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  payment_intent <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'charges'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许任何列，但按以下方式过滤最高效：</p>\n<ul>\n<li>id</li>\n<li>customer</li>\n</ul>\n<h3 id=\"checkout-sessions\">Checkout Sessions <a aria-hidden=\"true\" class=\"anchor\" href=\"#checkout-sessions\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>收银会话代表客户通过收银或支付链接进行一次性购买或订阅时的会话。我们建议每次客户尝试支付时都创建一个新的会话。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/checkout/sessions/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"dcb2b6c\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>checkout_sessions <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  customer <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  payment_intent <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  subscription <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'checkout/sessions'</span><span class=\"token punctuation\">,</span>\n    rowid_column <span class=\"token string\">'id'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许任何列，但按以下方式过滤最高效：</p>\n<ul>\n<li>id</li>\n<li>customer</li>\n<li>payment_intent</li>\n<li>subscription</li>\n</ul>\n<h3 id=\"customers\">Customers <a aria-hidden=\"true\" class=\"anchor\" href=\"#customers\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read and modify</em></p>\n<p>包含 Stripe 已知的客户信息。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/customers/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"e81a848\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>customers <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  email <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  name <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  description <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'customers'</span><span class=\"token punctuation\">,</span>\n    rowid_column <span class=\"token string\">'id'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许任何列，但按以下方式过滤最高效：</p>\n<ul>\n<li>id</li>\n<li>email</li>\n</ul>\n<h3 id=\"disputes\">Disputes <a aria-hidden=\"true\" class=\"anchor\" href=\"#disputes\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>客户向其信用卡发行机构质疑您的收费时，就会发生争议。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/disputes/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"435701c\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>disputes <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  charge <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  payment_intent <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  reason <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'disputes'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>charge</li>\n<li>payment_intent</li>\n</ul>\n<h3 id=\"events\">Events <a aria-hidden=\"true\" class=\"anchor\" href=\"#events\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>事件是我们通知您账户中发生有趣事情的方式。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/events/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"1b00e9a\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>events <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">type</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  api_version <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'events'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>type</li>\n</ul>\n<h3 id=\"files\">Files <a aria-hidden=\"true\" class=\"anchor\" href=\"#files\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>这是一个代表在 Stripe 服务器上托管的文件的对象。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/files/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"489f8b5\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>files <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  filename <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  purpose <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  title <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  size <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">type</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  url <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  expires_at <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'files'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>purpose</li>\n</ul>\n<h3 id=\"file-links\">File Links <a aria-hidden=\"true\" class=\"anchor\" href=\"#file-links\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>要与非 Stripe 用户共享 <code>File</code>对象的内容，您可以创建一个 <code>FileLink</code>。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/file_links/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"c9ecc0a\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>file_links <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">file</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  url <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  expired <span class=\"token keyword\">bool</span><span class=\"token punctuation\">,</span>\n  expires_at <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'file_links'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"invoices\">Invoices# <a aria-hidden=\"true\" class=\"anchor\" href=\"#invoices\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>发票是客户所欠金额的报表，可以一次性生成，也可以通过订阅定期生成。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/invoices/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"7c6d30c\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>invoices <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  customer <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  subscription <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  total <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  period_start <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  period_end <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'invoices'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>customer</li>\n<li>status</li>\n<li>subscription</li>\n</ul>\n<h3 id=\"mandates\">Mandates <a aria-hidden=\"true\" class=\"anchor\" href=\"#mandates\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>授权是记录客户授予您从其支付方式中扣款的权限的记录。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/mandates\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"6d17dd3\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>mandates <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  payment_method <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">type</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'mandates'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n</ul>\n<h3 id=\"payment-intents\">Payment Intents <a aria-hidden=\"true\" class=\"anchor\" href=\"#payment-intents\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>付款意向可引导您完成向客户收款的过程。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/payment_intents/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"963c68d\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>payment_intents <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  customer <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  payment_method <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'payment_intents'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>customer</li>\n</ul>\n<h3 id=\"payouts\">Payouts <a aria-hidden=\"true\" class=\"anchor\" href=\"#payouts\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>当您从 Stripe 收到资金，或者当您启动向连接的 Stripe 账户的银行账户或借记卡进行提现时，会创建一个 <code>Payout</code> 对象。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/payouts/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"c0b5eed\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>payouts <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  arrival_date <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  description <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  statement_descriptor <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'payouts'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>status</li>\n</ul>\n<h3 id=\"prices\">Prices <a aria-hidden=\"true\" class=\"anchor\" href=\"#prices\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>为了支持多种货币和定价选项，您的所有产品都需要一个<code>Price</code> 对象。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/prices/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"adb4e8b\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>prices <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  active <span class=\"token keyword\">bool</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  product <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  unit_amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">type</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'prices'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>active</li>\n</ul>\n<h3 id=\"products\">Products <a aria-hidden=\"true\" class=\"anchor\" href=\"#products\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read and modify</em></p>\n<p>Stripe 上提供的所有产品。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/products/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"2bf19e9\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>products <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  name <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  active <span class=\"token keyword\">bool</span><span class=\"token punctuation\">,</span>\n  default_price <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  description <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  updated <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'products'</span><span class=\"token punctuation\">,</span>\n    rowid_column <span class=\"token string\">'id'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>active</li>\n</ul>\n<h3 id=\"refunds\">Refunds <a aria-hidden=\"true\" class=\"anchor\" href=\"#refunds\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p><code>Refund</code>对象允许您退还之前已创建但尚未退还的收费。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/refunds/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"827a8f4\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>refunds <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  charge <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  payment_intent <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  reason <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'refunds'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>charge</li>\n<li>payment_intent</li>\n</ul>\n<h3 id=\"setupattempts\">SetupAttempts <a aria-hidden=\"true\" class=\"anchor\" href=\"#setupattempts\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>一个 <code>SetupAttempt</code> 描述了对 SetupIntent 的一次尝试确认，无论这次确认是成功还是失败。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/setup_attempts/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"4279346\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>setup_attempts <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  application <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  customer <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  on_behalf_of <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  payment_method <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  setup_intent <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">usage</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'setup_attempts'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>setup_intent</li>\n</ul>\n<h3 id=\"setupintents\">SetupIntents <a aria-hidden=\"true\" class=\"anchor\" href=\"#setupintents\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p><code>SetupIntent</code>  可引导您设置和保存客户支付凭证，以便将来付款。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/setup_intents/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"148c9db\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>setup_intents <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  client_secret <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  customer <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  description <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  payment_method <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">usage</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'setup_intents'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>customer</li>\n<li>payment_method</li>\n</ul>\n<h3 id=\"subscriptions\">Subscriptions <a aria-hidden=\"true\" class=\"anchor\" href=\"#subscriptions\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read and modify</em></p>\n<p>客户的定期支付计划。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/subscriptions/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"a31db60\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>subscriptions <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  customer <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  current_period_start <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  current_period_end <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'subscriptions'</span><span class=\"token punctuation\">,</span>\n    rowid_column <span class=\"token string\">'id'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>customer</li>\n<li>price</li>\n<li>status</li>\n</ul>\n<h3 id=\"tokens\">Tokens <a aria-hidden=\"true\" class=\"anchor\" href=\"#tokens\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>令牌化是 Stripe 用来以安全方式直接从客户处收集敏感的银行卡或银行账户信息或个人身份信息 (PII) 的过程。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/tokens\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"93ca0bc\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>tokens <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  customer <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  current_period_start <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  current_period_end <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'tokens'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"top-ups\">Top-ups <a aria-hidden=\"true\" class=\"anchor\" href=\"#top-ups\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>要为 Stripe 余额充值，您需要创建一个充值对象。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/topups/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"08a69b1\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>topups <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  description <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">status</span> <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'topups'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>status</li>\n</ul>\n<h3 id=\"transfers\">Transfers <a aria-hidden=\"true\" class=\"anchor\" href=\"#transfers\"><i class=\"material-icons align-middle\">link</i></a></h3><p><em>read only</em></p>\n<p>转账对象是在 Stripe 账户之间转移资金时创建的，是连接的一部分。</p>\n<p>參考: <a href=\"https://stripe.com/docs/api/transfers/list\" rel=\"external\" target=\"_blank\">Stripe 文档<svg height=\"16\" viewbox=\"0 0 24 24\" width=\"16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 5c-.552 0-1-.448-1-1s.448-1 1-1h6c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1v-3.586l-7.293 7.293c-.391.39-1.024.39-1.414 0-.391-.391-.391-1.024 0-1.414l7.293-7.293h-3.586zm-9 2c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552 0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1v4.563c0 1.657-1.343 3-3 3h-11c-1.657 0-3-1.343-3-3v-11c0-1.657 1.343-3 3-3h4.563c.552 0 1 .448 1 1s-.448 1-1 1h-4.563z\" fill=\"currentColor\"></path></svg></a></p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"841e0bd\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">foreign</span> <span class=\"token keyword\">table</span> stripe<span class=\"token punctuation\">.</span>transfers <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  amount <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\n  currency <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  description <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  destination <span class=\"token keyword\">text</span><span class=\"token punctuation\">,</span>\n  created <span class=\"token keyword\">timestamp</span><span class=\"token punctuation\">,</span>\n  attrs jsonb\n<span class=\"token punctuation\">)</span>\n  server stripe_server\n  options <span class=\"token punctuation\">(</span>\n    object <span class=\"token string\">'transfers'</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：</p>\n<ul>\n<li>id</li>\n<li>destination</li>\n</ul>\n<h2 id=\"支持查询下推\">支持查询下推 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e6%94%af%e6%8c%81%e6%9f%a5%e8%af%a2%e4%b8%8b%e6%8e%a8\"><i class=\"material-icons align-middle\">link</i></a></h2><p>FDW 支持 <code>where</code> 子句下推。您可以在 <code>where</code> 子句中指定过滤器，并将其传递给 Stripe API 调用。</p>\n<p>例如，此查询：</p>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"61159c6\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> stripe<span class=\"token punctuation\">.</span>customers <span class=\"token keyword\">where</span> id <span class=\"token operator\">=</span> <span class=\"token string\">'cus_xxx'</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<p>将被翻译为 Stripe API 调用: <code>https://api.stripe.com/v1/customers/cus_xxx</code>.</p>\n<p>有关每个对象支持的过滤列，请查看上面的外部表文档。</p>\n<h2 id=\"示例\">示例 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e7%a4%ba%e4%be%8b\"><i class=\"material-icons align-middle\">link</i></a></h2><p>关于如何使用 Stripe 外部表的一些示例。</p>\n<h3 id=\"基本示例\">基本示例 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e5%9f%ba%e6%9c%ac%e7%a4%ba%e4%be%8b\"><i class=\"material-icons align-middle\">link</i></a></h3>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"8cc3b5a\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token comment\">-- always limit records to reduce API calls to Stripe</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> stripe<span class=\"token punctuation\">.</span>customers <span class=\"token keyword\">limit</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> stripe<span class=\"token punctuation\">.</span>invoices <span class=\"token keyword\">limit</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> stripe<span class=\"token punctuation\">.</span>subscriptions <span class=\"token keyword\">limit</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"查询-json-属性\">查询 JSON 属性 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e6%9f%a5%e8%af%a2-json-%e5%b1%9e%e6%80%a7\"><i class=\"material-icons align-middle\">link</i></a></h3>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"d56bb9b\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token comment\">-- extract account name for an invoice</span>\n<span class=\"token keyword\">select</span> id<span class=\"token punctuation\">,</span> attrs<span class=\"token operator\">-</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token string\">'account_name'</span> <span class=\"token keyword\">as</span> account_name\n<span class=\"token keyword\">from</span> stripe<span class=\"token punctuation\">.</span>invoices <span class=\"token keyword\">where</span> id <span class=\"token operator\">=</span> <span class=\"token string\">'in_xxx'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- extract invoice line items for an invoice</span>\n<span class=\"token keyword\">select</span> id<span class=\"token punctuation\">,</span> attrs<span class=\"token comment\">#&gt;'{lines,data}' as line_items</span>\n<span class=\"token keyword\">from</span> stripe<span class=\"token punctuation\">.</span>invoices <span class=\"token keyword\">where</span> id <span class=\"token operator\">=</span> <span class=\"token string\">'in_xxx'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- extract subscription items for a subscription</span>\n<span class=\"token keyword\">select</span> id<span class=\"token punctuation\">,</span> attrs<span class=\"token comment\">#&gt;'{items,data}' as items</span>\n<span class=\"token keyword\">from</span> stripe<span class=\"token punctuation\">.</span>subscriptions <span class=\"token keyword\">where</span> id <span class=\"token operator\">=</span> <span class=\"token string\">'sub_xxx'</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n<h3 id=\"数据修改\">数据修改 <a aria-hidden=\"true\" class=\"anchor\" href=\"#%e6%95%b0%e6%8d%ae%e4%bf%ae%e6%94%b9\"><i class=\"material-icons align-middle\">link</i></a></h3>\n<div class=\"prism-codeblock\">\n<div class=\"code-toolbar\"><pre class=\"language-sql\" id=\"78bd9e5\" tabindex=\"0\"><code class=\"language-sql\"><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> stripe<span class=\"token punctuation\">.</span>customers<span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">,</span>name<span class=\"token punctuation\">,</span>description<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'test@test.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'test name'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">update</span> stripe<span class=\"token punctuation\">.</span>customers <span class=\"token keyword\">set</span> description<span class=\"token operator\">=</span><span class=\"token string\">'hello fdw'</span> <span class=\"token keyword\">where</span> id <span class=\"token operator\">=</span><span class=\"token string\">'cus_xxx'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">update</span> stripe<span class=\"token punctuation\">.</span>customers <span class=\"token keyword\">set</span> attrs<span class=\"token operator\">=</span><span class=\"token string\">'{\"metadata[foo]\": \"bar\"}'</span> <span class=\"token keyword\">where</span> id <span class=\"token operator\">=</span><span class=\"token string\">'cus_xxx'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">delete</span> <span class=\"token keyword\">from</span> stripe<span class=\"token punctuation\">.</span>customers <span class=\"token keyword\">where</span> id <span class=\"token operator\">=</span><span class=\"token string\">'cus_xxx'</span><span class=\"token punctuation\">;</span></code></pre><div class=\"toolbar\"><div class=\"toolbar-item\"><button aria-label=\"copy\" class=\"copy-to-clipboard-button\" data-copy-state=\"copy\" type=\"button\"><span></span></button></div></div></div>\n</div>\n</div>\n</div>\n<div><hr class=\"doc-hr\"/>\n<div class=\"d-print-none\" id=\"doc-nav\">\n<div class=\"row flex-xl-nowrap\">\n<div class=\"col-sm-6 pt-2 doc-next\">\n<a href=\"/docs/app/development_guide/database/wrappers/logflare/\">\n<div class=\"card h-100 my-1\">\n<div class=\"card-body py-2\">\n<p class=\"card-title fs-5 fw-semibold lh-base mb-0\"><i class=\"material-icons align-middle\">navigate_before</i> Logflare</p>\n</div>\n</div>\n</a>\n</div>\n<div class=\"col-sm-6 pt-2 doc-prev\">\n<a class=\"ms-auto\" href=\"/docs/app/development_guide/api/api/\">\n<div class=\"card h-100 my-1 text-end\">\n<div class=\"card-body py-2\">\n<p class=\"card-title fs-5 fw-semibold lh-base mb-0\">概述 <i class=\"material-icons align-middle\">navigate_next</i></p>\n</div>\n</div>\n</a>\n</div>\n</div>\n</div></div>\n</div>\n</div>\n</div>\n</div>\n\n</main>",
  "markdown": "[MemFireDB备份 6](/)\n\nmenu\n\n[官网](https://memfiredb.com/)\n[论坛](https://community.memfiredb.com/)\n[登录](https://cloud.memfiredb.com/auth/login)\n\nEnable dark mode\n\nEnable light mode\n\n本页\n\n准备\n\n# Stripe\n\nStripe 是一个由 API 驱动的在线支付处理工具。`supabase/wrappers` 提供了以下端点。\n\n## 准备 [*link*](#%e5%87%86%e5%a4%87)\n\n在开始之前，请确保您的数据库上安装了 `wrappers` 扩展：\n\n```\ncreate extension if not exists wrappers with schema extensions;\n```\n\n然后创建外部数据封装器：\n\n```\ncreate foreign data wrapper stripe_wrapper\nhandler stripe_fdw_handler\nvalidator stripe_fdw_validator;\n```\n\n### 安全保护您的凭证（可选） [*link*](#%e5%ae%89%e5%85%a8%e4%bf%9d%e6%8a%a4%e6%82%a8%e7%9a%84%e5%87%ad%e8%af%81%e5%8f%af%e9%80%89)\n\n默认情况下，Postgres 将 FDW 凭证以明文形式存储在 `pg_catalog.pg_foreign_server` 中。任何有权访问此表的人都能够查看这些凭证。封装器设计为与 [Vault](https://supabase.com/docs/guides/database/vault) 配合使用，Vault 提供了额外的安全级别来存储凭证。我们建议您使用 Vault 存储您的凭证。\n\n```\n-- Save your Stripe API key in Vault and retrieve the `key_id`\ninsert into vault.secrets (name, secret)\nvalues (\n  'stripe',\n  'YOUR_SECRET'\n)\nreturning key_id;\n```\n\n### 连接到 Stripe [*link*](#%e8%bf%9e%e6%8e%a5%e5%88%b0-stripe)\n\n我们需要为 Postgres 提供连接到 Stripe 的凭证和任何额外的选项。我们可以使用 `create server` 命令来完成这个操作：\n\n使用 Vault\n\n```\ncreate server stripe_server\nforeign data wrapper stripe_wrapper\noptions (\n  api_key_id '<key_ID>', -- The Key ID from above, required.\n  api_url 'https://api.stripe.com/v1/'  -- Stripe API base URL, optional. Default is 'https://api.stripe.com/v1/'\n);\n```\n\n不使用 Vault\n\n```\ncreate server stripe_server\nforeign data wrapper stripe_wrapper\noptions (\n  api_key '<Stripe API Key>',  -- Stripe API key, required\n  api_url 'https://api.stripe.com/v1/'  -- Stripe API base URL, optional. Default is 'https://api.stripe.com/v1/'\n);\n```\n\n## 创建外部表 [*link*](#%e5%88%9b%e5%bb%ba%e5%a4%96%e9%83%a8%e8%a1%a8)\n\nStripe 封装器支持从 Stripe API 读取和修改数据。.\n\n| Object | Select | Insert | Update | Delete | Truncate |\n| --- | --- | --- | --- | --- | --- |\n| [Accounts](https://stripe.com/docs/api/accounts/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Balance](https://stripe.com/docs/api/balance) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Balance Transactions](https://stripe.com/docs/api/balance_transactions/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Charges](https://stripe.com/docs/api/charges/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Checkout Sessions](https://stripe.com/docs/api/checkout/sessions/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Customers](https://stripe.com/docs/api/customers/list) | ✅ | ✅ | ✅ | ✅ | ❌ |\n| [Disputes](https://stripe.com/docs/api/disputes/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Events](https://stripe.com/docs/api/events/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Files](https://stripe.com/docs/api/files/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [File Links](https://stripe.com/docs/api/file_links/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Invoices](https://stripe.com/docs/api/invoices/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Mandates](https://stripe.com/docs/api/mandates) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [PaymentIntents](https://stripe.com/docs/api/payment_intents/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Payouts](https://stripe.com/docs/api/payouts/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Prices](https://stripe.com/docs/api/prices/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Products](https://stripe.com/docs/api/products/list) | ✅ | ✅ | ✅ | ✅ | ❌ |\n| [Refunds](https://stripe.com/docs/api/refunds/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [SetupAttempts](https://stripe.com/docs/api/setup_attempts/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [SetupIntents](https://stripe.com/docs/api/setup_intents/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Subscriptions](https://stripe.com/docs/api/subscriptions/list) | ✅ | ✅ | ✅ | ✅ | ❌ |\n| [Tokens](https://stripe.com/docs/api/tokens) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Topups](https://stripe.com/docs/api/topups/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n| [Transfers](https://stripe.com/docs/api/transfers/list) | ✅ | ❌ | ❌ | ❌ | ❌ |\n\nStripe 外部表反映了 Stripe 的 API。我们可以创建一个模式来容纳所有 Stripe 表。\n\n```\ncreate schema stripe;\n```\n\n然后创建外部表，例如：\n\n```\ncreate foreign table stripe.accounts (\n  id text,\n  business_type text,\n  country text,\n  email text,\n  type text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'accounts'\n  );\n```\n\n`attrs` 是一个特殊列，它以 JSON 格式存储所有对象属性，您可以从中提取任何需要的属性或其关联的子对象。请参阅下面的更多示例。\n\n### Accounts [*link*](#accounts)\n\n*read only*\n\n这是一个代表 Stripe 账户的对象。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/accounts/list)\n\n```\ncreate foreign table stripe.accounts (\n  id text,\n  business_type text,\n  country text,\n  email text,\n  type text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'accounts'\n  );\n```\n\n虽然在 where 子句中允许任何列，但按以下方式过滤最高效：\n\n* id\n\n### Balance [*link*](#balance)\n\n*read only*\n\n显示您 Stripe 账户当前的余额。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/balance)\n\n```\ncreate foreign table stripe.balance (\n  balance_type text,\n  amount bigint,\n  currency text,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'balance'\n  );\n```\n\n### Balance Transactions [*link*](#balance-transactions)\n\n*read only*\n\n余额交易代表通过您的 Stripe 账户的资金流动。它们为您的 Stripe 账户余额中进出的每种交易类型创建。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/balance_transactions/list)\n\n```\ncreate foreign table stripe.balance_transactions (\n  id text,\n  amount bigint,\n  currency text,\n  description text,\n  fee bigint,\n  net bigint,\n  status text,\n  type text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'balance_transactions'\n  );\n```\n\n虽然在 where 子句中允许任何列，但按以下方式过滤最高效：\n\n* id\n* type\n\n### Charges [*link*](#charges)\n\n*read only*\n\n要对信用卡或借记卡进行收费，您需要创建一个 Charge 对象。您可以检索和退款个别收费，以及列出所有收费。收费由一个唯一的随机 ID 标识。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/charges/list)\n\n```\ncreate foreign table stripe.charges (\n  id text,\n  amount bigint,\n  currency text,\n  customer text,\n  description text,\n  invoice text,\n  payment_intent text,\n  status text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'charges'\n  );\n```\n\n虽然在 where 子句中允许任何列，但按以下方式过滤最高效：\n\n* id\n* customer\n\n### Checkout Sessions [*link*](#checkout-sessions)\n\n*read only*\n\n收银会话代表客户通过收银或支付链接进行一次性购买或订阅时的会话。我们建议每次客户尝试支付时都创建一个新的会话。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/checkout/sessions/list)\n\n```\ncreate foreign table stripe.checkout_sessions (\n  id text,\n  customer text,\n  payment_intent text,\n  subscription text,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'checkout/sessions',\n    rowid_column 'id'\n  );\n```\n\n虽然在 where 子句中允许任何列，但按以下方式过滤最高效：\n\n* id\n* customer\n* payment\\_intent\n* subscription\n\n### Customers [*link*](#customers)\n\n*read and modify*\n\n包含 Stripe 已知的客户信息。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/customers/list)\n\n```\ncreate foreign table stripe.customers (\n  id text,\n  email text,\n  name text,\n  description text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'customers',\n    rowid_column 'id'\n  );\n```\n\n虽然在 where 子句中允许任何列，但按以下方式过滤最高效：\n\n* id\n* email\n\n### Disputes [*link*](#disputes)\n\n*read only*\n\n客户向其信用卡发行机构质疑您的收费时，就会发生争议。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/disputes/list)\n\n```\ncreate foreign table stripe.disputes (\n  id text,\n  amount bigint,\n  currency text,\n  charge text,\n  payment_intent text,\n  reason text,\n  status text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'disputes'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* charge\n* payment\\_intent\n\n### Events [*link*](#events)\n\n*read only*\n\n事件是我们通知您账户中发生有趣事情的方式。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/events/list)\n\n```\ncreate foreign table stripe.events (\n  id text,\n  type text,\n  api_version text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'events'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* type\n\n### Files [*link*](#files)\n\n*read only*\n\n这是一个代表在 Stripe 服务器上托管的文件的对象。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/files/list)\n\n```\ncreate foreign table stripe.files (\n  id text,\n  filename text,\n  purpose text,\n  title text,\n  size bigint,\n  type text,\n  url text,\n  created timestamp,\n  expires_at timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'files'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* purpose\n\n### File Links [*link*](#file-links)\n\n*read only*\n\n要与非 Stripe 用户共享 `File`对象的内容，您可以创建一个 `FileLink`。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/file_links/list)\n\n```\ncreate foreign table stripe.file_links (\n  id text,\n  file text,\n  url text,\n  created timestamp,\n  expired bool,\n  expires_at timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'file_links'\n  );\n```\n\n### Invoices# [*link*](#invoices)\n\n*read only*\n\n发票是客户所欠金额的报表，可以一次性生成，也可以通过订阅定期生成。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/invoices/list)\n\n```\ncreate foreign table stripe.invoices (\n  id text,\n  customer text,\n  subscription text,\n  status text,\n  total bigint,\n  currency text,\n  period_start timestamp,\n  period_end timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'invoices'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* customer\n* status\n* subscription\n\n### Mandates [*link*](#mandates)\n\n*read only*\n\n授权是记录客户授予您从其支付方式中扣款的权限的记录。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/mandates)\n\n```\ncreate foreign table stripe.mandates (\n  id text,\n  payment_method text,\n  status text,\n  type text,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'mandates'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n\n### Payment Intents [*link*](#payment-intents)\n\n*read only*\n\n付款意向可引导您完成向客户收款的过程。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/payment_intents/list)\n\n```\ncreate foreign table stripe.payment_intents (\n  id text,\n  customer text,\n  amount bigint,\n  currency text,\n  payment_method text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'payment_intents'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* customer\n\n### Payouts [*link*](#payouts)\n\n*read only*\n\n当您从 Stripe 收到资金，或者当您启动向连接的 Stripe 账户的银行账户或借记卡进行提现时，会创建一个 `Payout` 对象。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/payouts/list)\n\n```\ncreate foreign table stripe.payouts (\n  id text,\n  amount bigint,\n  currency text,\n  arrival_date timestamp,\n  description text,\n  statement_descriptor text,\n  status text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'payouts'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* status\n\n### Prices [*link*](#prices)\n\n*read only*\n\n为了支持多种货币和定价选项，您的所有产品都需要一个`Price` 对象。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/prices/list)\n\n```\ncreate foreign table stripe.prices (\n  id text,\n  active bool,\n  currency text,\n  product text,\n  unit_amount bigint,\n  type text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'prices'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* active\n\n### Products [*link*](#products)\n\n*read and modify*\n\nStripe 上提供的所有产品。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/products/list)\n\n```\ncreate foreign table stripe.products (\n  id text,\n  name text,\n  active bool,\n  default_price text,\n  description text,\n  created timestamp,\n  updated timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'products',\n    rowid_column 'id'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* active\n\n### Refunds [*link*](#refunds)\n\n*read only*\n\n`Refund`对象允许您退还之前已创建但尚未退还的收费。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/refunds/list)\n\n```\ncreate foreign table stripe.refunds (\n  id text,\n  amount bigint,\n  currency text,\n  charge text,\n  payment_intent text,\n  reason text,\n  status text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'refunds'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* charge\n* payment\\_intent\n\n### SetupAttempts [*link*](#setupattempts)\n\n*read only*\n\n一个 `SetupAttempt` 描述了对 SetupIntent 的一次尝试确认，无论这次确认是成功还是失败。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/setup_attempts/list)\n\n```\ncreate foreign table stripe.setup_attempts (\n  id text,\n  application text,\n  customer text,\n  on_behalf_of text,\n  payment_method text,\n  setup_intent text,\n  status text,\n  usage text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'setup_attempts'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* setup\\_intent\n\n### SetupIntents [*link*](#setupintents)\n\n*read only*\n\n`SetupIntent` 可引导您设置和保存客户支付凭证，以便将来付款。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/setup_intents/list)\n\n```\ncreate foreign table stripe.setup_intents (\n  id text,\n  client_secret text,\n  customer text,\n  description text,\n  payment_method text,\n  status text,\n  usage text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'setup_intents'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* customer\n* payment\\_method\n\n### Subscriptions [*link*](#subscriptions)\n\n*read and modify*\n\n客户的定期支付计划。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/subscriptions/list)\n\n```\ncreate foreign table stripe.subscriptions (\n  id text,\n  customer text,\n  currency text,\n  current_period_start timestamp,\n  current_period_end timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'subscriptions',\n    rowid_column 'id'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* customer\n* price\n* status\n\n### Tokens [*link*](#tokens)\n\n*read only*\n\n令牌化是 Stripe 用来以安全方式直接从客户处收集敏感的银行卡或银行账户信息或个人身份信息 (PII) 的过程。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/tokens)\n\n```\ncreate foreign table stripe.tokens (\n  id text,\n  customer text,\n  currency text,\n  current_period_start timestamp,\n  current_period_end timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'tokens'\n  );\n```\n\n### Top-ups [*link*](#top-ups)\n\n*read only*\n\n要为 Stripe 余额充值，您需要创建一个充值对象。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/topups/list)\n\n```\ncreate foreign table stripe.topups (\n  id text,\n  amount bigint,\n  currency text,\n  description text,\n  status text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'topups'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* status\n\n### Transfers [*link*](#transfers)\n\n*read only*\n\n转账对象是在 Stripe 账户之间转移资金时创建的，是连接的一部分。\n\n參考: [Stripe 文档](https://stripe.com/docs/api/transfers/list)\n\n```\ncreate foreign table stripe.transfers (\n  id text,\n  amount bigint,\n  currency text,\n  description text,\n  destination text,\n  created timestamp,\n  attrs jsonb\n)\n  server stripe_server\n  options (\n    object 'transfers'\n  );\n```\n\n虽然在 where 子句中允许使用任何列进行过滤，但以下方式的过滤最为高效：\n\n* id\n* destination\n\n## 支持查询下推 [*link*](#%e6%94%af%e6%8c%81%e6%9f%a5%e8%af%a2%e4%b8%8b%e6%8e%a8)\n\nFDW 支持 `where` 子句下推。您可以在 `where` 子句中指定过滤器，并将其传递给 Stripe API 调用。\n\n例如，此查询：\n\n```\nselect * from stripe.customers where id = 'cus_xxx';\n```\n\n将被翻译为 Stripe API 调用: `https://api.stripe.com/v1/customers/cus_xxx`.\n\n有关每个对象支持的过滤列，请查看上面的外部表文档。\n\n## 示例 [*link*](#%e7%a4%ba%e4%be%8b)\n\n关于如何使用 Stripe 外部表的一些示例。\n\n### 基本示例 [*link*](#%e5%9f%ba%e6%9c%ac%e7%a4%ba%e4%be%8b)\n\n```\n-- always limit records to reduce API calls to Stripe\nselect * from stripe.customers limit 10;\nselect * from stripe.invoices limit 10;\nselect * from stripe.subscriptions limit 10;\n```\n\n### 查询 JSON 属性 [*link*](#%e6%9f%a5%e8%af%a2-json-%e5%b1%9e%e6%80%a7)\n\n```\n-- extract account name for an invoice\nselect id, attrs->>'account_name' as account_name\nfrom stripe.invoices where id = 'in_xxx';\n\n-- extract invoice line items for an invoice\nselect id, attrs#>'{lines,data}' as line_items\nfrom stripe.invoices where id = 'in_xxx';\n\n-- extract subscription items for a subscription\nselect id, attrs#>'{items,data}' as items\nfrom stripe.subscriptions where id = 'sub_xxx';\n```\n\n### 数据修改 [*link*](#%e6%95%b0%e6%8d%ae%e4%bf%ae%e6%94%b9)\n\n```\ninsert into stripe.customers(email,name,description) values ('test@test.com', 'test name', null);\nupdate stripe.customers set description='hello fdw' where id ='cus_xxx';\nupdate stripe.customers set attrs='{\"metadata[foo]\": \"bar\"}' where id ='cus_xxx';\ndelete from stripe.customers where id ='cus_xxx';\n```\n\n---\n\n[*navigate\\_before* Logflare](/docs/app/development_guide/database/wrappers/logflare/)\n\n[概述 *navigate\\_next*](/docs/app/development_guide/api/api/)"
}