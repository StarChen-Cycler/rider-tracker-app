(base) Mac-mini:~ zyc_ccz$ history
    1  launchctl list | grep frpc
    2  ./frpc -c ./frpc.toml
    3  ./frpc -c ./frpc.toml
    4  sudo ./frpc -c frpc.toml
    5  sudo ./frpc -c frpc.toml
    6  sudo ./frpc -c frpc.toml
    7  cd frp_0.62.1_darwin_arm64/
    8  ./frpc -c ./frpc.toml
    9  /usr/bin/python3 /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
   10  ./frpc -c ./frpc.toml
   11  ./frpc -c ./frpc.toml
   12  ./frpc -c ./frpc.toml
   13  launchctl load ~/Library/LaunchAgents/com.frp.frpc.plist
   14  launchctl unload ~/Library/LaunchAgents/com.frp.frpc.plist
   15  launchctl load ~/Library/LaunchAgents/com.frp.frpc.plist
   16  ./frpc -c ./frpc.toml
   17  ./frpc -c ./frpc.toml
   18  /usr/bin/python3 /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
   19  . "\Users\zyc_ccz\.cursor-server\cli\servers\Stable-0781e811de386a0c5bcb07ceb259df8ff8246a50\server\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration-bash.sh"
   20  pnpm preview
   21  lsof -i :8080
   22  kill -9 79533
   23  lsof -i :8080
   24  kill -9 79864
   25  lsof -i :8080
   26  lsof -i :8080
   27  kill -9 79974
   28  lsof -i :8080 -n -P
   29  kill -9 80094
   30  lsof -i :8080 -n -P
   31  netstat -anp | grep :8080
   32  ss -tulpn | grep :8080ps aux | grep $(lsof -t -i:8080)
   33  ps aux | grep $(lsof -t -i:8080)
   34  pstree -p $(lsof -t -i:8080)
   35  sudo apt-get pstree
   36  sudo get apt
   37  ps aux | grep $(lsof -t -i:8080)
   38  ps aux | grep $(lsof -t -i:8080)
   39  ps aux | grep $(lsof -t -i:8080)
   40  ps aux | grep $(lsof -t -i:8080)
   41  ps aux | grep $(lsof -t -i:8080)
   42  ps aux | grep $(lsof -t -i:8080)
   43  ps aux | grep $(lsof -t -i:8080)
   44  pstree -p $(lsof -t -i:8080)
   45  lsof -i :8080 -n -P
   46  lsof -i :8080
   47     launchctl stop com.vite-dashboard.frontend
   48     launchctl start com.vite-dashboard.frontend
   49  cat logs/frontend.log
   50  cat logs/backend.log
   51     launchctl stop com.vite-dashboard.frontend
   52     launchctl start com.vite-dashboard.frontend
   53     launchctl stop com.vite-dashboard.frontend
   54  ./deploy-production.sh
   55  ./deploy-production.sh
   56  ./deploy-production.sh
   57  ./deploy-production.sh
   58  ./restart-all-services.sh
   59  npm run build
   60  ./restart-all-services.sh
   61  ./reload-frontend-service.sh
   62  cat logs/backend.log
   63  cat logs/frontend.log
   64     launchctl stop com.vite-dashboard.backend
   65     launchctl start com.vite-dashboard.backend
   66  ./restart-all-services.sh
   67  ./restart-all-services.sh
   68  ./restart-all-services.sh
   69  ./restart-all-services.sh
   70  ./reload-frontend-service.sh
   71  ./reload-frontend-service.sh
   72  ./restart-all-services.sh
   73  ./reload-frontend-service.sh
   74  ./install-services.sh
   75    sudo ./install-services.sh
   76   sudo systemctl status frontend-service
   77     ./install-macos-services.sh
   78  ./reload-frontend-service.sh
   79  launchctl unload ~/Library/LaunchAgents/com.vite-dashboard.frontend.plist
   80  launchctl unload ~/Library/LaunchAgents/com.vite-dashboard.backend.plist
   81  /usr/bin/python3 /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
   82  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/zyc_ccz/web_app/vite-soft-ui-dashboard-main/api/auth_api.py
   83  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/zyc_ccz/web_app/vite-soft-ui-dashboard-main/api/auth_api.py
   84  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/zyc_ccz/web_app/vite-soft-ui-dashboard-main/api/auth_api.py
   85  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/zyc_ccz/web_app/vite-soft-ui-dashboard-main/api/auth_api.py
   86  python user_manager.py migrate_salts
   87  cd api
   88  python user_manager.py migrate_salts
   89  python user_manager.py migrate_salts
   90  python user_manager.py add username password "Full Name" --role admin
   91  launchctl load ~/Library/LaunchAgents/com.vite-dashboard.frontend.plist
   92  launchctl load ~/Library/LaunchAgents/com.vite-dashboard.backend.plist
   93  launchctl list | grep vite-dashboard
   94  pnpm build
   95  launchctl unload ~/Library/LaunchAgents/com.vite-dashboard.frontend.plist
   96  launchctl unload ~/Library/LaunchAgents/com.vite-dashboard.backend.plist
   97  launchctl load ~/Library/LaunchAgents/com.vite-dashboard.frontend.plist
   98  launchctl load ~/Library/LaunchAgents/com.vite-dashboard.backend.plist
   99  ./deploy.sh 
  100  pnpm dev
  101  pnpm dev
  102  pnpm dev
  103  pnpm dev
  104  /usr/bin/python3 /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  105  /usr/bin/python3 /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  106  pnpm install
  107  pnpm build
  108  pnpm preview
  109  pnpm install
  110  pnpm build
  111  pnpm dev
  112  pnpm preview
  113  pnpm build
  114  pnpm preview
  115   ./app-daemon.sh start
  116  cd ..
  117  cd ..
  118   ./app-daemon.sh start
  119  ./app-daemon.sh status
  120   ./app-daemon.sh status
  121   ./app-daemon.sh logs
  122  ./app-daemon.sh start
  123   ./app-daemon.sh restart
  124  ./app-daemon.sh visitor_stats
  125  ./app-daemon.sh visitor_stats
  126  ./app-daemon.sh visitor_stats
  127  pnpm build
  128   ./app-daemon.sh restart
  129  ./app-daemon.sh visitor_stats
  130  ./app-daemon.sh visitor_stats
  131  ./app-daemon.sh visitor_stats
  132   ./app-daemon.sh restart
  133  ./app-daemon.sh visitor_stats
  134  . "\Users\zyc_ccz\.cursor-server\cli\servers\Stable-0781e811de386a0c5bcb07ceb259df8ff8246a50\server\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration-bash.sh"
  135  ./frpc -c frpc.toml
  136  launchctl load ~/Library/LaunchAgents/com.frp.frpc.plist
  137  sudo launchctl load ~/Library/LaunchAgents/com.frp.frpc.plist
  138  launchctl list | grep frpc
  139  launchctl unload ~/Library/LaunchAgents/com.frp.frpc.plist
  140  launchctl load ~/Library/LaunchAgents/com.frp.frpc.plist
  141  launchctl unload ~/Library/LaunchAgents/com.frp.frpc.plist
  142  launchctl load ~/Library/LaunchAgents/com.frp.frpc.plist
  143  /Users/zyc_ccz/miniconda3/bin/python /Users/web_app/stock-monitor/get_tree.py
  144  . "\Users\zyc_ccz\.cursor-server\cli\servers\Stable-0781e811de386a0c5bcb07ceb259df8ff8246a50\server\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration-bash.sh"
  145  python /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  146  /Users/zyc_ccz/miniconda3/bin/python /Users/web_app/stock-monitor/get_tree.py
  147  /Users/web_app/stock-monitor/api/install_dependencies.sh
  148  cd api
  149  ./start_service.sh https://47.239.138.185
  150  cd api
  151  pnpm install
  152  pnpm dev
  153  pnpm dev
  154  pnpm dev
  155  pnpm dev
  156  /Users/zyc_ccz/miniconda3/bin/python /Users/web_app/stock-monitor/get_tree.py
  157  pnpm dev
  158  pnpm dev
  159  pnpm dev
  160  pnpm dev
  161  pnpm dev
  162  cd api
  163  pnpm dev
  164  pnpm dev
  165  pnpm dev
  166  pnpm dev
  167  pnpm dev
  168  pnpm dev
  169  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/fetch_mock_data_for_index.py
  170  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/fetch_mock_data_for_forex.py
  171  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/fetch_mock_data_for_etf.py
  172  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/fetch_mock_data_for_crypto.py
  173  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/fetch_mock_data_for_crypto.py
  174  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/fetch_mock_data_for_crypto.py
  175  /usr/bin/python3 /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  176  python /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  177  python /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  178  pnpm dev
  179  . "\Users\zyc_ccz\.cursor-server\cli\servers\Stable-0781e811de386a0c5bcb07ceb259df8ff8246a50\server\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration-bash.sh"
  180  cd src/server
  181  pnpm dev
  182  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/tokens/server/token-generator-given-quota.py
  183  cd server
  184  pnpm install
  185  pnpm dev
  186  cd ..
  187  cd server
  188  cd src/server
  189  pnpm install
  190  pnpm dev
  191  pnpm dev
  192  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/token-generator-given-quota.py
  193  pnpm dev
  194  pnpm dev
  195  python /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  196  /usr/bin/python3 /Users/zyc_ccz/.vscode/extensions/ms-python.python-2025.4.0-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.vscode/extensions/ms-python.python-2025.4.0-darwin-arm64/python_files/deactivate/bash/envVars.txt
  197  . "\Users\zyc_ccz\.cursor-server\cli\servers\Stable-0781e811de386a0c5bcb07ceb259df8ff8246a50\server\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration-bash.sh"
  198  . "\Users\zyc_ccz\.cursor-server\cli\servers\Stable-0781e811de386a0c5bcb07ceb259df8ff8246a50\server\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration-bash.sh"
  199  cd LaunchDaemons
  200  sudo rm com.frp.frpc.plist
  201  ./app-daemon.sh restart
  202  ./app-daemon.sh restart
  203  ./app-daemon.sh stop
  204  pnpm dev
  205  ./app-daemon.sh restart
  206  pnpm build
  207  ./app-daemon.sh restart
  208  pnpm build
  209  ./app-daemon.sh restart
  210  pnpm build
  211  ./app-daemon.sh restart
  212  pnpm build
  213  ./app-daemon.sh restart
  214  ./app-daemon.sh stop
  215  pnpm dev
  216  pnpm build
  217  ./app-daemon.sh restart
  218  pnpm build
  219  ./app-daemon.sh restart
  220  pnpm build
  221  ./app-daemon.sh restart
  222  curl -I http://localhost:3001/api/health
  223  screen -S stock-monitor-api
  224    screen -r stock-monitor-api
  225  curl -I http://localhost:3001/api/health
  226  curl http://localhost:3001/api/health
  227  curl https://47.239.138.185/api/health -k
  228  ps aux | grep frpc
  229  ps aux | grep frpc
  230  ps aux | grep frpc
  231  ps aux | grep frpc
  232  mkdir -p ~/api_backup
  233  cp -r /Users/web_app/stock-monitor/api ~/api_backup/
  234  mv /Users/web_app/stock-monitor/api /Users/web_app/stock-monitor/api_deprecated
  235  pnpm dev
  236  pnpm dev
  237  pnpm dev
  238  screen -r stock-monitor-api
  239  screen -r stock-monitor-api
  240  screen -r stock-monitor-api
  241  screen -r stock-monitor-api
  242  screen -r stock-monitor-api
  243  screen -r stock-monitor-api
  244  screen -r stock-monitor-api
  245  screen -r stock-monitor-api
  246  screen -r stock-monitor-api
  247  screen -r stock-monitor-api
  248  screen -r stock-monitor-api
  249  screen -r stock-monitor-api
  250  screen -r stock-monitor-api
  251  screen -r stock-monitor-api
  252  screen -r stock-monitor-api
  253  pnpm build
  254  ./app-daemon.sh restart
  255  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/app.py
  256  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/wsgi.py
  257  pnpm build
  258   ./app-daemon.sh restart
  259  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/app.py
  260  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/app.py
  261  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/app.py
  262  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/app.py
  263  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/app.py
  264  screen -S stock-monitor-api
  265  pnpm build
  266  ./app-daemon.sh restart
  267  pnpm build
  268  ./app-daemon.sh restart
  269  screen -S stock-monitor-api
  270  /usr/bin/python3 /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  271   source venv/bin/activate
  272  cd src/server
  273  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  274  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  275  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  276  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  277  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  278  pkill -f gunicorn
  279  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  280  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  281  pkill -f gunicorn
  282  pkill -f gunicorn
  283  pkill -f gunicorn
  284  pkill -f gunicorn
  285  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  286  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  287  pkill -f gunicorn
  288  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  289  pkill -f gunicorn
  290  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  291  pkill -f gunicorn
  292  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  293  screen -S stock-monitor-api
  294  screen -S stock-monitor-api
  295  screen -S stock
  296  source venv/bin/activate
  297  ./app-daemon.sh restart
  298  ./app-daemon.sh stop
  299  pnpm build
  300  ./app-daemon.sh restart
  301  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  302  cd src
  303  cd server
  304  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  305  q
  306  d
  307  ddd
  308  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  309  d
  310  screen -X -S stock-monitor-api quit
  311  screen -X -S stock-monitor-api quit
  312  screen -X -S 31221.stock-monitor-api quit
  313  screen -S stock-monitor-api
  314  screen -r stock-monitor-api
  315  screen -S stock-monitor-api
  316  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  317  screen -X -S stock-monitor-api quit
  318  screen -X -S 33020.stock-monitor-api quit
  319  screen -S stock-monitor-api
  320  screen -r stock-monitor-api
  321  screen -X -S 31221.stock-monitor-api quit
  322  screen -S stock-monitor-api
  323  screen -S stock-monitor-api
  324  screen -X -S stock-monitor-api quit
  325  screen -X -S 32626.stock-monitor-api quit
  326  screen -X -S stock-monitor-api quit
  327  screen -X -S stock-monitor-api quit
  328  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  329  pkill -f gunicorn
  330  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  331  pkill -f gunicorn
  332  pkill -f gunicorn
  333  cd src/server
  334  gunicorn --workers 3 --bind 0.0.0.0:3001 wsgi:app
  335  screen -S stock-monitor-api
  336   ./app-daemon.sh restart
  337   ./app-daemon.sh restart
  338  /usr/bin/python3 /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  339  screen -r stock-monitor-api
  340  . "\Users\zyc_ccz\.cursor-server\cli\servers\Stable-0781e811de386a0c5bcb07ceb259df8ff8246a50\server\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration-bash.sh"
  341  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/get_tree.py
  342  screen -r stock-monitor-api
  343  screen -X -S stock-monitor-api quit
  344  screen -X -S stock-monitor-api quit
  345  screen -r 53207.stock-monitor-api
  346  screen -X -S stock-monitor-api quit
  347  screen -X -S 53207.stock-monitor-api quit
  348  screen -X -S 90009.stock-monitor-api quit
  349  screen -X -S 52810.stock-monitor-api quit
  350  screen -S stock-monitor-api
  351     openssl genrsa -out server.key 2048
  352   echo "[req]
  353     distinguished_name = req_distinguished_name
  354     req_extensions = v3_req
  355     prompt = no
  356     
  357     [req_distinguished_name]
  358     CN = 47.239.138.185
  359     
  360     [v3_req]
  361     basicConstraints = CA:FALSE
  362     keyUsage = nonRepudiation, digitalSignature, keyEncipherment
  363     subjectAltName = @alt_names
  364     
  365     [alt_names]
  366     IP.1 = 47.239.138.185" > openssl.cnf
  367  openssl req -new -x509 -key server.key -out server.crt -days 365 -config openssl.cnf
  368     curl -L https://fly.io/install.sh | sh
  369    fly auth signup
  370  export FLYCTL_INSTALL="/Users/zyc_ccz/.fly"
  371  export PATH="$FLYCTL_INSTALL/bin:$PATH"
  372    fly auth signup
  373  mkdir cors-proxy
  374     cd cors-proxy
  375     fly launch
  376     fly launch
  377     fly launch
  378     fly launch
  379     fly launch
  380     fly launch
  381     fly launch
  382     fly ips allocate-v4 --app safari-cors-proxy
  383  . "\Users\zyc_ccz\.cursor-server\cli\servers\Stable-0781e811de386a0c5bcb07ceb259df8ff8246a50\server\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration-bash.sh"
  384  APP_NAME="stock-monitor"
  385  APP_DIR="$(dirname "$0")"
  386  TMP_DIR="${APP_DIR}/tmp"
  387  PID_FILE="${TMP_DIR}/${APP_NAME}.pid"
  388  LOG_FILE="${TMP_DIR}/${APP_NAME}.log"
  389  VISITOR_LOG_FILE="${TMP_DIR}/visitor-logs.json"
  390  PORT=8080 # Using the preview port from package.json
  391  GREEN='\033[0;32m'
  392  RED='\033[0;31m'
  393  YELLOW='\033[0;33m'
  394  NC='\033[0m' # No Color
  395  is_running() {   if [ -f "$PID_FILE" ]; then     PID=$(cat "$PID_FILE");     if ps -p "$PID" > /dev/null; then       return 0 # Running;     fi;   fi;   return 1 # Not running; }
  396  start() {   if is_running; then     echo -e "${YELLOW}${APP_NAME} is already running (PID: $(cat "$PID_FILE"))${NC}";     return;   fi;    echo -e "${GREEN}Starting ${APP_NAME}...${NC}";   cd "$APP_DIR" || exit 1;      mkdir -p "$TMP_DIR";      if [ ! -d "dist" ] || [ -z "$(ls -A dist)" ]; then     echo -e "${YELLOW}Building the application...${NC}";     pnpm build;   fi;      if [ ! -f "$VISITOR_LOG_FILE" ]; then     echo -e "${YELLOW}Initializing visitor logs file...${NC}";     echo "[]" > "$VISITOR_LOG_FILE";     chmod 666 "$VISITOR_LOG_FILE"  # Make it readable/writable by all users;   fi;      export ENABLE_REQUEST_MONITORING=true;   export SERVER_SIDE_LOGGING_ONLY=true;   export NODE_ENV=production;   export LOG_DIR="$TMP_DIR";      if ! pnpm list express | grep -q "express"; then     echo -e "${YELLOW}Installing express for the server...${NC}";     pnpm add express --silent;   fi;      echo -e "${YELLOW}Starting application with server-side request monitoring...${NC}";   nohup node server.js > "$LOG_FILE" 2>&1 &      PID=$!;   echo $PID > "$PID_FILE";   echo -e "${GREEN}${APP_NAME} started with PID: $PID${NC}";   echo -e "${GREEN}The application is now running at http://localhost:${PORT}${NC}";   echo -e "${YELLOW}Server-side request monitoring is enabled${NC}";   echo -e "${YELLOW}Check logs with: ./app-daemon.sh logs${NC}";   echo -e "${YELLOW}Log files located at: ${TMP_DIR}${NC}"; }
  397  stop() {   if ! is_running; then     echo -e "${YELLOW}${APP_NAME} is not running${NC}";     return;   fi;      PID=$(cat "$PID_FILE");   echo -e "${RED}Stopping ${APP_NAME} (PID: $PID)...${NC}";      kill $PID;   rm -f "$PID_FILE";   echo -e "${RED}${APP_NAME} stopped${NC}"; }
  398  status() {   if is_running; then     PID=$(cat "$PID_FILE");     echo -e "${GREEN}${APP_NAME} is running (PID: $PID)${NC}";     echo -e "${GREEN}The application is available at http://localhost:${PORT}${NC}";     echo -e "${YELLOW}Application log file: $LOG_FILE${NC}";          if [ -f "$VISITOR_LOG_FILE" ]; then       VISITOR_COUNT=$(grep -o '"id"' "$VISITOR_LOG_FILE" 2>/dev/null | wc -l);       echo -e "${YELLOW}Server-side request monitoring is enabled${NC}";       echo -e "${YELLOW}${VISITOR_COUNT} visitor records in log file: ${VISITOR_LOG_FILE}${NC}";     else       echo -e "${RED}Server-side request monitoring is not enabled or log file not found${NC}";     fi;   else     echo -e "${RED}${APP_NAME} is not running${NC}";   fi; }
  399  logs() {   if [ -f "$LOG_FILE" ]; then     if [ "$1" == "-n" ] && [ -n "$2" ]; then       tail -n "$2" "$LOG_FILE";     else       tail ${1:--f} "$LOG_FILE";     fi;   else     echo -e "${RED}Log file not found${NC}";   fi; }
  400  visitor_stats() {   if [ -f "$VISITOR_LOG_FILE" ]; then     echo -e "${GREEN}Visitor Statistics:${NC}";     echo -e "${YELLOW}Total records:${NC} $(grep -o '"id"' "$VISITOR_LOG_FILE" 2>/dev/null | wc -l)";          echo -e "${YELLOW}Unique IPs:${NC} $(grep -o '"ip":[^,]*' "$VISITOR_LOG_FILE" 2>/dev/null | sort | uniq | wc -l)";          LAST_VISIT=$(grep -o '"timestamp":"[^"]*"' "$VISITOR_LOG_FILE" 2>/dev/null | head -1 | sed 's/"timestamp":"//;s/"//g');     echo -e "${YELLOW}Last visit:${NC} ${LAST_VISIT:-Unknown}";          FRP_COUNT=$(grep -o '"x-frp-src' "$VISITOR_LOG_FILE" 2>/dev/null | wc -l);     if [ "$FRP_COUNT" -gt 0 ]; then       echo -e "${YELLOW}FRP connections:${NC} $FRP_COUNT";     fi;          PROXY_COUNT=$(grep -o '"x-forwarded-for"' "$VISITOR_LOG_FILE" 2>/dev/null | wc -l);     if [ "$PROXY_COUNT" -gt 0 ]; then       echo -e "${YELLOW}Proxy connections:${NC} $PROXY_COUNT";     fi;          echo -e "${YELLOW}Top 5 requested paths:${NC}";     grep -o '"url":"[^"]*"' "$VISITOR_LOG_FILE" 2>/dev/null | cut -d'"' -f4 | sort | uniq -c | sort -rn | head -5 |      while read count path; do       echo "  $path: $count requests";     done;          echo -e "${YELLOW}Top 3 user agents:${NC}";     grep -o '"userAgent":"[^"]*"' "$VISITOR_LOG_FILE" 2>/dev/null | sort | uniq -c | sort -rn | head -3 |     while read count agent; do       AGENT_SHORT=$(echo "$agent" | sed 's/"userAgent":"//;s/"//g' | cut -d' ' -f1-3);       echo "  $AGENT_SHORT: $count visits";     done;   else     echo -e "${RED}Visitor log file not found${NC}";   fi; }
  401  visitor_detail() {   if [ -f "$VISITOR_LOG_FILE" ]; then     if [ -z "$1" ]; then       echo -e "${RED}Please provide the number of entries to display${NC}";       echo -e "Usage: $0 visitor_detail [number]";       return 1;     fi;          echo -e "${GREEN}Detailed Visitor Log (Last $1 entries):${NC}";          if command -v jq &> /dev/null; then       jq -r ".[:$1] | .[] | \"\\nTime: \(.timestamp)\\nIP: \(if .network then .network.ip else .ip end)\\nMethod: \(.method)\\nPath: \(.url)\\nUser Agent: \(.userAgent)\\nProxy Headers: \(if .network and .network.proxyInfo then .network.proxyInfo | keys | join(\", \") else \"none\" end)\\n\"" "$VISITOR_LOG_FILE";     else       head -n $(($1 * 20)) "$VISITOR_LOG_FILE" | grep -E '"timestamp"|"(ip|network)"|"url"|"method"|"userAgent"|"referer"|"proxyInfo"' | sed 's/^ *"//g;s/"://g;s/,$//g;s/"//g';     fi;   else     echo -e "${RED}Visitor log file not found${NC}";   fi; }
  402  clear_visitor_logs() {   if [ -f "$VISITOR_LOG_FILE" ]; then     echo "[]" > "$VISITOR_LOG_FILE";     echo -e "${GREEN}Visitor logs cleared${NC}";   else     echo -e "${RED}Visitor log file not found${NC}";   fi; }
  403  case "$1" in   start)     start;     ;;   stop)     stop;     ;;   restart)     stop;     sleep 2;     start;     ;;   status)     status;     ;;   logs)     logs "$2";     ;;   visitor_stats)     visitor_stats;     ;;   visitor_detail)     visitor_detail "$2";     ;;   clear_visitor_logs)     clear_visitor_logs;     ;;   *)     echo "Usage: $0 {start|stop|restart|status|logs|visitor_stats|visitor_detail|clear_visitor_logs}";     echo "  start            - Start the application with server-side monitoring";     echo "  stop             - Stop the application";     echo "  restart          - Restart the application";     echo "  status           - Check application status";     echo "  logs             - View application logs";     echo "  visitor_stats    - View visitor statistics summary";     echo "  visitor_detail   - View detailed visitor log";     echo "  clear_visitor_logs - Clear all visitor logs";     exit 1;     ;; esac
  404  ./app-daemon.sh stop
  405  ./app-daemon.sh start_combined
  406  ./app-daemon.sh stop
  407  ./app-daemon.sh stop_combined
  408  ./app-daemon.sh stop_combined
  409  ./app-daemon.sh start_combined
  410  ./app-daemon.sh stop_combined
  411  ./app-daemon.sh stop
  412  ./app-daemon.sh start
  413  ./app-daemon.sh stop
  414  ./app-daemon.sh stop_combined
  415  ./app-daemon.sh start_combined
  416  ./app-daemon.sh stop_combined
  417  ./app-daemon.sh stop
  418  ./app-daemon.sh start_combined
  419  ./app-daemon.sh stop_combined
  420  ./app-daemon.sh start_combined
  421  ./app-daemon.sh stop_combined
  422  ./app-daemon.sh start_combined
  423  ./app-daemon.sh start_combined
  424  ./app-daemon.sh start_combined
  425  ./app-daemon.sh stop_combined
  426  ./app-daemon.sh start_combined
  427  ./app-daemon.sh start_combined
  428  ./app-daemon.sh restart_combined
  429  pnpm build
  430  /usr/bin/python3 /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  431  ./app-daemon.sh restart_combined
  432  pnpm dev
  433  pnpm dev
  434  pnpm build
  435  ./app-daemon.sh restart_combined
  436  ./app-daemon.sh stop_combined
  437  ./app-daemon.sh start
  438  pnpm build
  439  ./app-daemon.sh restart
  440  ./app-daemon.sh stop
  441  ./app-daemon.sh restart_combined
  442  pnpm build
  443  ./app-daemon.sh restart_combined
  444  pnpm build
  445  ./app-daemon.sh restart_combined
  446  pnpm build
  447  ./app-daemon.sh restart_combined
  448  ./app-daemon.sh restart_combined
  449  pnpm build
  450  ./app-daemon.sh restart_combined
  451  pnpm build
  452  ./app-daemon.sh restart_combined
  453  pnpm dev
  454  pnpm build
  455  ./app-daemon.sh restart_combined
  456  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/app.py
  457  /Users/zyc_ccz/miniconda3/envs/monitor/bin/python /Users/web_app/stock-monitor/src/server/app.py
  458  /usr/bin/python3 /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  459  /usr/bin/python3 /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  460  pnpm build
  461   ./app-daemon.sh restart
  462  pnpm build
  463   ./app-daemon.sh restart
  464  pnpm build
  465   ./app-daemon.sh restart
  466  pnpm build
  467   ./app-daemon.sh restart
  468  pnpm build
  469   ./app-daemon.sh restart
  470  pnpm build
  471   ./app-daemon.sh restart
  472  pnpm build
  473   ./app-daemon.sh restart
  474  pnpm build
  475   ./app-daemon.sh restart
  476  pnpm build
  477   ./app-daemon.sh restart
  478  pnpm build
  479   ./app-daemon.sh restart
  480  pnpm build
  481   ./app-daemon.sh restart
  482  pnpm build
  483   ./app-daemon.sh restart
  484  pnpm build
  485   ./app-daemon.sh restart
  486   ./app-daemon.sh start_combined
  487   ./app-daemon.sh restart_combined
  488  pnpm build
  489   ./app-daemon.sh restart_combined
  490   ./app-daemon.sh restart_combined
  491  ./app-daemon.sh stop_combined
  492   ./app-daemon.sh restart_combined
  493  python /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/zyc_ccz/.cursor-server/extensions/ms-python.python-2024.12.3-darwin-arm64/python_files/deactivate/bash/envVars.txt
  494  git clone https://github.com/StarChen-Cycler/rider-tracker-app.git
  495  pnpm install
  496  cd rider-tracker-app/
  497  pnpm install
  498  pnpm dev
  499  history
(base) Mac-mini:~ zyc_ccz$ 